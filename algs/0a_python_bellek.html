<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.1: Python'da Bellek ve Referanslar</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .memory-box {
            display: inline-block;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 5px;
            text-align: center;
            background: white;
        }
        .memory-box .addr {
            font-size: 10px;
            color: #666;
            font-family: monospace;
        }
        .memory-box .value {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        .memory-box .varname {
            font-size: 12px;
            color: #3498db;
            font-style: italic;
        }
        .arrow-right {
            display: inline-block;
            color: #e74c3c;
            font-size: 24px;
            margin: 0 10px;
        }
        .concept-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .concept-box h3 {
            margin-top: 0;
            color: white;
        }
        .info-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }
        .warning-card {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        .danger-card {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ§  0.1: Python'da Bellek ve Referanslar</h1>
        <p>Linked List ve BST iÃ§in Temel Kavramlar</p>
    </header>

    <div class="section">
        <h2>ğŸ¯ Neden Bu Konuyu Ã–ÄŸrenmeliyiz?</h2>
        <p>Linked List ve Binary Search Tree gibi veri yapÄ±larÄ±nÄ± anlamak iÃ§in <strong>referans (pointer)</strong> kavramÄ±nÄ± bilmek gerekir.</p>

        <div class="concept-box">
            <h3>ğŸ“Œ Temel Fikir</h3>
            <p>Python'da bir deÄŸiÅŸken <strong>deÄŸerin kendisini deÄŸil</strong>, o deÄŸerin bellekteki <strong>adresini (referansÄ±nÄ±)</strong> tutar.</p>
            <p>Bu, C'deki pointer kavramÄ±na benzer!</p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ” id() Fonksiyonu: Bellek Adresini GÃ¶rme</h2>
        <p><code>id(obj)</code> fonksiyonu, bir objenin bellekteki benzersiz kimliÄŸini (adresini) dÃ¶ndÃ¼rÃ¼r.</p>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code1"><code class="language-python"># Basit deÄŸerler
a = 42
b = 42
c = 43

print("=" * 50)
print("ğŸ”¢ TAM SAYILAR")
print("=" * 50)
print(f"a = {a}, id(a) = {id(a)}")
print(f"b = {b}, id(b) = {id(b)}")
print(f"c = {c}, id(c) = {id(c)}")

print(f"\na ve b aynÄ± obje mi? {a is b}")  # True! Python kÃ¼Ã§Ã¼k sayÄ±larÄ± cache'ler
print(f"a ve c aynÄ± obje mi? {a is c}")    # False

print("\n" + "=" * 50)
print("ğŸ“ STRING'LER")
print("=" * 50)
s1 = "merhaba"
s2 = "merhaba"
s3 = "dÃ¼nya"

print(f"s1 = '{s1}', id(s1) = {id(s1)}")
print(f"s2 = '{s2}', id(s2) = {id(s2)}")
print(f"s3 = '{s3}', id(s3) = {id(s3)}")

print(f"\ns1 ve s2 aynÄ± obje mi? {s1 is s2}")  # True! String interning

print("\n" + "=" * 50)
print("ğŸ“¦ LÄ°STELER")
print("=" * 50)
liste1 = [1, 2, 3]
liste2 = [1, 2, 3]
liste3 = liste1  # AynÄ± listeye referans!

print(f"liste1 = {liste1}, id(liste1) = {id(liste1)}")
print(f"liste2 = {liste2}, id(liste2) = {id(liste2)}")
print(f"liste3 = {liste3}, id(liste3) = {id(liste3)}")

print(f"\nliste1 ve liste2 aynÄ± obje mi? {liste1 is liste2}")  # False! FarklÄ± listeler
print(f"liste1 ve liste3 aynÄ± obje mi? {liste1 is liste3}")    # True! AynÄ± liste</code></pre>

            <textarea id="code1" class="code-editor">a = 42
b = 42
c = 43

print(f"a = {a}, id(a) = {id(a)}")
print(f"b = {b}, id(b) = {id(b)}")
print(f"c = {c}, id(c) = {id(c)}")

print(f"\na ve b aynÄ± obje mi? {a is b}")

liste1 = [1, 2, 3]
liste2 = [1, 2, 3]
liste3 = liste1

print(f"\nliste1 id: {id(liste1)}")
print(f"liste2 id: {id(liste2)}")
print(f"liste3 id: {id(liste3)}")

print(f"\nliste1 is liste2: {liste1 is liste2}")
print(f"liste1 is liste3: {liste1 is liste3}")</textarea>

            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š GÃ¶rsel: DeÄŸiÅŸkenler ve Referanslar</h2>

        <div class="info-card">
            <h4 style="margin-top:0;">1ï¸âƒ£ Ä°mmutable (DeÄŸiÅŸtirilemez) Tipler</h4>
            <p>int, str, tuple gibi tipler deÄŸiÅŸtirilemez. AynÄ± deÄŸer = aynÄ± adres (genellikle).</p>

            <div style="text-align:center; margin:20px 0;">
                <div class="memory-box">
                    <div class="varname">a</div>
                    <div class="arrow-right">â†’</div>
                </div>
                <div class="memory-box" style="background:#d4edda;">
                    <div class="addr">0x7f123456</div>
                    <div class="value">42</div>
                </div>
                <div class="memory-box">
                    <div class="varname">b</div>
                    <div class="arrow-right">â†’</div>
                </div>
            </div>
            <p style="text-align:center; color:#666;">a ve b aynÄ± 42 objesini gÃ¶steriyor (aynÄ± adres)</p>
        </div>

        <div class="info-card warning-card">
            <h4 style="margin-top:0;">2ï¸âƒ£ Mutable (DeÄŸiÅŸtirilebilir) Tipler</h4>
            <p>list, dict, set gibi tipler deÄŸiÅŸtirilebilir. Her oluÅŸturma yeni adres!</p>

            <div style="text-align:center; margin:20px 0;">
                <div class="memory-box">
                    <div class="varname">liste1</div>
                    <div class="arrow-right">â†’</div>
                </div>
                <div class="memory-box" style="background:#cce5ff;">
                    <div class="addr">0x7f111111</div>
                    <div class="value">[1,2,3]</div>
                </div>

                <br><br>

                <div class="memory-box">
                    <div class="varname">liste2</div>
                    <div class="arrow-right">â†’</div>
                </div>
                <div class="memory-box" style="background:#fff3cd;">
                    <div class="addr">0x7f222222</div>
                    <div class="value">[1,2,3]</div>
                </div>
            </div>
            <p style="text-align:center; color:#856404;">liste1 ve liste2 aynÄ± iÃ§eriÄŸe sahip ama FARKLI objeler!</p>
        </div>
    </div>

    <div class="section">
        <h2>âš ï¸ Tehlikeli Durum: Aliasing (Takma Ad)</h2>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code2')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code2')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code2"><code class="language-python"># âš ï¸ ALÄ°ASÄ°NG: Ä°ki deÄŸiÅŸken aynÄ± objeyi gÃ¶sterirse...

print("=" * 50)
print("âš ï¸ ALIASING PROBLEMÄ°")
print("=" * 50)

# liste1 oluÅŸtur
liste1 = [1, 2, 3]
print(f"liste1 baÅŸlangÄ±Ã§: {liste1}")

# liste2'yi liste1'e eÅŸitle (KOPYA DEÄÄ°L, REFERANS!)
liste2 = liste1
print(f"liste2 = liste1 sonrasÄ±")
print(f"  liste1: {liste1}, id: {id(liste1)}")
print(f"  liste2: {liste2}, id: {id(liste2)}")

# liste2'yi deÄŸiÅŸtir
print("\nâš¡ liste2.append(4) yapÄ±yoruz...")
liste2.append(4)

print(f"\nâŒ SonuÃ§:")
print(f"  liste1: {liste1}")  # liste1 de deÄŸiÅŸti!
print(f"  liste2: {liste2}")
print(f"\n  Ä°kisi de aynÄ± obje: {liste1 is liste2}")

print("\n" + "=" * 50)
print("âœ… Ã‡Ã–ZÃœM: KOPYA OLUÅTUR")
print("=" * 50)

# Yeni baÅŸtan
liste1 = [1, 2, 3]
liste2 = liste1.copy()  # veya liste1[:] veya list(liste1)

print(f"liste1: {liste1}, id: {id(liste1)}")
print(f"liste2 (kopya): {liste2}, id: {id(liste2)}")

liste2.append(4)
print(f"\nliste2.append(4) sonrasÄ±:")
print(f"  liste1: {liste1}")  # DeÄŸiÅŸmedi!
print(f"  liste2: {liste2}")
print(f"\n  ArtÄ±k farklÄ± objeler: {liste1 is liste2}")</code></pre>

            <textarea id="code2" class="code-editor">liste1 = [1, 2, 3]
liste2 = liste1  # Alias!

print(f"liste1: {liste1}")
print(f"liste2: {liste2}")

liste2.append(4)

print(f"\nliste2.append(4) sonrasÄ±:")
print(f"liste1: {liste1}")  # liste1 de deÄŸiÅŸti!
print(f"liste2: {liste2}")

# Ã‡Ã¶zÃ¼m: Kopya
liste3 = liste1.copy()
liste3.append(5)
print(f"\nliste3 (kopya) deÄŸiÅŸti ama liste1 aynÄ±:")
print(f"liste1: {liste1}")
print(f"liste3: {liste3}")</textarea>

            <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”— Linked List ile BaÄŸlantÄ±: Node ReferanslarÄ±</h2>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code3')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code3')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code3"><code class="language-python"># Linked List iÃ§in Node sÄ±nÄ±fÄ±
class Node:
    def __init__(self, data):
        self.data = data
        self.next = None  # BaÅŸlangÄ±Ã§ta hiÃ§bir yere iÅŸaret etmiyor

# Node'lar oluÅŸtur
node_a = Node("A")
node_b = Node("B")
node_c = Node("C")

print("=" * 60)
print("ğŸ”— NODE'LAR VE REFERANSLARI")
print("=" * 60)

print(f"\nnode_a: data={node_a.data}, id={id(node_a)}")
print(f"node_b: data={node_b.data}, id={id(node_b)}")
print(f"node_c: data={node_c.data}, id={id(node_c)}")

# BaÄŸlantÄ±larÄ± kur
print("\nâ›“ï¸ BaÄŸlantÄ±larÄ± kuruyoruz...")
node_a.next = node_b  # A -> B
node_b.next = node_c  # B -> C

print(f"\nnode_a.next = {node_a.next} (id: {id(node_a.next)})")
print(f"node_b       = {node_b}      (id: {id(node_b)})")
print(f"AynÄ± obje mi? {node_a.next is node_b}")

print("\n" + "=" * 60)
print("ğŸš¶ LÄ°STEYÄ° GEZELÄ°M")
print("=" * 60)

current = node_a  # BaÅŸtan baÅŸla
step = 1
while current is not None:
    next_info = f"â†’ {current.next.data}" if current.next else "â†’ None"
    print(f"AdÄ±m {step}: data={current.data}, id={id(current)} {next_info}")
    current = current.next  # Sonraki node'a geÃ§
    step += 1

print("\nğŸ’¡ GÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi, her node bir sonrakinin REFERANSINI tutuyor!")
print("   Bu 'pointer' mantÄ±ÄŸÄ±nÄ±n Python versiyonudur.")</code></pre>

            <textarea id="code3" class="code-editor">class Node:
    def __init__(self, data):
        self.data = data
        self.next = None

node_a = Node("A")
node_b = Node("B")
node_c = Node("C")

print(f"node_a id: {id(node_a)}")
print(f"node_b id: {id(node_b)}")
print(f"node_c id: {id(node_c)}")

# BaÄŸla
node_a.next = node_b
node_b.next = node_c

# Gez
print("\nListeyi gez:")
current = node_a
while current:
    print(f"  {current.data} (id: {id(current)})")
    current = current.next</textarea>

            <div id="output-code3" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“š == vs is FarkÄ±</h2>

        <div class="info-card">
            <table style="width:100%; border-collapse:collapse;">
                <tr style="background:#f8f9fa;">
                    <th style="padding:12px; border:1px solid #ddd;">OperatÃ¶r</th>
                    <th style="padding:12px; border:1px solid #ddd;">KarÅŸÄ±laÅŸtÄ±rma</th>
                    <th style="padding:12px; border:1px solid #ddd;">Ã–rnek</th>
                </tr>
                <tr>
                    <td style="padding:12px; border:1px solid #ddd;"><code>==</code></td>
                    <td style="padding:12px; border:1px solid #ddd;">DeÄŸer eÅŸitliÄŸi</td>
                    <td style="padding:12px; border:1px solid #ddd;"><code>[1,2] == [1,2]</code> â†’ True</td>
                </tr>
                <tr>
                    <td style="padding:12px; border:1px solid #ddd;"><code>is</code></td>
                    <td style="padding:12px; border:1px solid #ddd;">Kimlik eÅŸitliÄŸi (aynÄ± obje mi?)</td>
                    <td style="padding:12px; border:1px solid #ddd;"><code>[1,2] is [1,2]</code> â†’ False</td>
                </tr>
            </table>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code4')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code4')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code4"><code class="language-python"># == vs is

a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(f"a = {a}")
print(f"b = {b}")
print(f"c = a")

print(f"\na == b: {a == b}")  # True - deÄŸerler eÅŸit
print(f"a is b: {a is b}")    # False - farklÄ± objeler

print(f"\na == c: {a == c}")  # True - deÄŸerler eÅŸit
print(f"a is c: {a is c}")    # True - AYNI obje!

# None kontrolÃ¼ iÃ§in is kullanÄ±n
print(f"\nğŸ“Œ None kontrolÃ¼:")
x = None
print(f"x == None: {x == None}")  # Ã‡alÄ±ÅŸÄ±r ama...
print(f"x is None: {x is None}")  # Tercih edilen yÃ¶ntem!</code></pre>

            <textarea id="code4" class="code-editor">a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(f"a == b: {a == b}")
print(f"a is b: {a is b}")

print(f"\na == c: {a == c}")
print(f"a is c: {a is c}")

x = None
print(f"\nx is None: {x is None}")</textarea>

            <div id="output-code4" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š Ã–zet</h2>

        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
            <thead>
                <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                    <th style="padding: 15px;">Kavram</th>
                    <th style="padding: 15px;">AÃ§Ä±klama</th>
                    <th style="padding: 15px;">Ã–rnek</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>id()</strong></td>
                    <td style="padding: 12px;">Objenin bellek kimliÄŸi</td>
                    <td style="padding: 12px;"><code>id(x)</code></td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>is</strong></td>
                    <td style="padding: 12px;">AynÄ± obje mi?</td>
                    <td style="padding: 12px;"><code>a is b</code></td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>Referans</strong></td>
                    <td style="padding: 12px;">DeÄŸiÅŸken = objenin adresi</td>
                    <td style="padding: 12px;"><code>x = obj</code></td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>Aliasing</strong></td>
                    <td style="padding: 12px;">Ä°ki isim, aynÄ± obje</td>
                    <td style="padding: 12px;"><code>b = a</code></td>
                </tr>
                <tr>
                    <td style="padding: 12px;"><strong>Kopya</strong></td>
                    <td style="padding: 12px;">Yeni obje oluÅŸtur</td>
                    <td style="padding: 12px;"><code>b = a.copy()</code></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="nav-footer">
        <a href="index.html" class="btn">â¬…ï¸ Ana MenÃ¼</a>
        <a href="fonksiyonlar.html" class="btn btn-next">Sonraki: Fonksiyonlar â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    function toggleEdit(id) {
        const view = document.getElementById('view-' + id);
        const editor = document.getElementById(id);
        if (editor.style.display === 'block') { editor.style.display = 'none'; view.style.display = 'block'; }
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
</script>
</body>
</html>

