<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.5: Queue Analizi ve Big O</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .complexity-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .complexity-table th, .complexity-table td {
            padding: 15px 20px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        .complexity-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }
        .complexity-table tr:hover {
            background: #f8f9fa;
        }
        .o-1 { color: #27ae60; font-weight: bold; }
        .o-n { color: #e74c3c; font-weight: bold; }
        
        .compare-box {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .compare-item {
            flex: 1;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .compare-good { background: #d4edda; border: 2px solid #27ae60; }
        .compare-bad { background: #f8d7da; border: 2px solid #e74c3c; }
        
        .memory-visual {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .memory-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #333;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
            transition: all 0.3s;
        }
        .cell-used { background: #3498db; color: white; }
        .cell-empty { background: #ecf0f1; color: #999; }
        .cell-head { border-color: #27ae60; border-width: 3px; }
        .cell-tail { border-color: #e74c3c; border-width: 3px; }
        .cell-wasted { background: #ffeb3b; color: #333; }
        
        .pointer-label {
            font-size: 10px;
            position: absolute;
            top: -20px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ“Š 3.5: Queue Analizi ve Zaman KarmaÅŸÄ±klÄ±ÄŸÄ±</h1>
        <p>Big O Notasyonu ile Performans DeÄŸerlendirmesi</p>
    </header>

    <div class="section">
        <h2>â±ï¸ Zaman KarmaÅŸÄ±klÄ±ÄŸÄ± (Time Complexity)</h2>
        <table class="complexity-table">
            <thead>
                <tr>
                    <th>Operasyon</th>
                    <th>List</th>
                    <th>Deque</th>
                    <th>Circular Queue</th>
                    <th>AÃ§Ä±klama</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Enqueue</strong></td>
                    <td class="o-1">O(1)*</td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td>Sona ekleme</td>
                </tr>
                <tr>
                    <td><strong>Dequeue</strong></td>
                    <td class="o-n">O(n) âš ï¸</td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td>BaÅŸtan silme</td>
                </tr>
                <tr>
                    <td><strong>Peek/Front</strong></td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td>BaÅŸa bakma</td>
                </tr>
                <tr>
                    <td><strong>isEmpty</strong></td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td>BoÅŸluk kontrolÃ¼</td>
                </tr>
                <tr>
                    <td><strong>Size</strong></td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td class="o-1">O(1)</td>
                    <td>Eleman sayÄ±sÄ±</td>
                </tr>
            </tbody>
        </table>
        <p style="font-size: 0.9em; color: #666;">* List.append() amortize O(1)'dir ancak pop(0) her zaman O(n)!</p>
    </div>

    <div class="section">
        <h2>ğŸ’¾ Alan KarmaÅŸÄ±klÄ±ÄŸÄ± (Space Complexity)</h2>
        <div class="compare-box">
            <div class="compare-item compare-good">
                <h3>ğŸ”„ Circular Queue</h3>
                <p><strong>O(n)</strong> - Sabit boyut</p>
                <p>Bellek kullanÄ±mÄ± Ã¶ngÃ¶rÃ¼lebilir. Ã–nceden ayrÄ±lmÄ±ÅŸ alan.</p>
            </div>
            <div class="compare-item compare-bad">
                <h3>ğŸ“ Dinamik Queue</h3>
                <p><strong>O(n)</strong> - DeÄŸiÅŸken boyut</p>
                <p>Yeniden boyutlandÄ±rma maliyeti. HafÄ±za parÃ§alanmasÄ± riski.</p>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ” Neden List ile Dequeue YavaÅŸ?</h2>
        <p><strong>Shifting Problemi:</strong> Python listesi bitiÅŸik hafÄ±zada tutulur. BaÅŸtan sildiÄŸinizde TÃœM elemanlar kaymak zorundadÄ±r.</p>
        
        <h3>GÃ¶rsel: pop(0) SonrasÄ± KaydÄ±rma</h3>
        <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
            <div>
                <p style="margin: 5px 0; font-weight: bold;">Ã–nce: [A, B, C, D, E]</p>
                <div class="memory-visual">
                    <div class="memory-cell cell-used cell-head">A</div>
                    <div class="memory-cell cell-used">B</div>
                    <div class="memory-cell cell-used">C</div>
                    <div class="memory-cell cell-used">D</div>
                    <div class="memory-cell cell-used">E</div>
                </div>
            </div>
            <div style="font-size: 24px;">â¬‡ï¸ pop(0) â†’ A Ã§Ä±karÄ±lÄ±yor</div>
            <div>
                <p style="margin: 5px 0; font-weight: bold;">Sonra: [B, C, D, E] - 4 kaydÄ±rma iÅŸlemi!</p>
                <div class="memory-visual">
                    <div class="memory-cell cell-used cell-head">B</div>
                    <div class="memory-cell cell-used">C</div>
                    <div class="memory-cell cell-used">D</div>
                    <div class="memory-cell cell-used">E</div>
                    <div class="memory-cell cell-empty">-</div>
                </div>
            </div>
        </div>
        <p style="text-align: center; margin-top: 15px; color: #e74c3c;">
            <strong>1 milyon eleman = 999,999 kaydÄ±rma iÅŸlemi! ğŸ˜±</strong>
        </p>
    </div>

    <div class="section">
        <h2>ğŸ§ª Performans KarÅŸÄ±laÅŸtÄ±rma Testi</h2>
        <p>FarklÄ± Queue implementasyonlarÄ±nÄ± 50,000 enqueue/dequeue ile test edelim:</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Benchmark BaÅŸlat</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code1"><code class="language-python">import time
from collections import deque

N = 50_000
print(f"ğŸ§ª {N} enqueue + {N} dequeue testi\n")
print("=" * 50)

# 1. Python List (KÃ¶tÃ¼ YÃ¶ntem)
liste = []
start = time.time()
for i in range(N):
    liste.append(i)
for _ in range(N):
    liste.pop(0)  # O(n) - Her seferinde kaydÄ±rma!
list_time = time.time() - start
print(f"ğŸ“‹ List (pop(0))  : {list_time:.4f} sn")

# 2. collections.deque (Ä°yi YÃ¶ntem)
kuyruk = deque()
start = time.time()
for i in range(N):
    kuyruk.append(i)
for _ in range(N):
    kuyruk.popleft()  # O(1) - Sabit zaman!
deque_time = time.time() - start
print(f"ğŸ”„ Deque (popleft): {deque_time:.4f} sn")

# 3. Circular Queue (Numpy)
import numpy as np

class CircularQueue:
    def __init__(self, capacity):
        self.data = np.zeros(capacity, dtype=int)
        self.head = self.tail = self.size = 0
        self.capacity = capacity
    def enqueue(self, val):
        if self.size < self.capacity:
            self.data[self.tail] = val
            self.tail = (self.tail + 1) % self.capacity
            self.size += 1
    def dequeue(self):
        if self.size > 0:
            val = self.data[self.head]
            self.head = (self.head + 1) % self.capacity
            self.size -= 1
            return val

cq = CircularQueue(N)
start = time.time()
for i in range(N):
    cq.enqueue(i)
for _ in range(N):
    cq.dequeue()
cq_time = time.time() - start
print(f"â­• Circular Queue : {cq_time:.4f} sn")

print("=" * 50)
print(f"\nğŸ“Š SonuÃ§:")
print(f"   Deque, List'ten {list_time/deque_time:.0f}x daha hÄ±zlÄ±!")
print(f"   Circular Queue saf Python olmasÄ±na raÄŸmen O(1) garanti ediyor.")</code></pre>

            <textarea id="code1" class="code-editor">import time
from collections import deque
import numpy as np

N = 50_000
print(f"ğŸ§ª {N} enqueue + {N} dequeue testi\n")
print("=" * 50)

# 1. Python List
liste = []
start = time.time()
for i in range(N): liste.append(i)
for _ in range(N): liste.pop(0)
list_time = time.time() - start
print(f"ğŸ“‹ List (pop(0))  : {list_time:.4f} sn")

# 2. collections.deque
kuyruk = deque()
start = time.time()
for i in range(N): kuyruk.append(i)
for _ in range(N): kuyruk.popleft()
deque_time = time.time() - start
print(f"ğŸ”„ Deque (popleft): {deque_time:.4f} sn")

# 3. Circular Queue
class CircularQueue:
    def __init__(self, capacity):
        self.data = np.zeros(capacity, dtype=int)
        self.head = self.tail = self.size = 0
        self.capacity = capacity
    def enqueue(self, val):
        if self.size < self.capacity:
            self.data[self.tail] = val
            self.tail = (self.tail + 1) % self.capacity
            self.size += 1
    def dequeue(self):
        if self.size > 0:
            val = self.data[self.head]
            self.head = (self.head + 1) % self.capacity
            self.size -= 1
            return val

cq = CircularQueue(N)
start = time.time()
for i in range(N): cq.enqueue(i)
for _ in range(N): cq.dequeue()
cq_time = time.time() - start
print(f"â­• Circular Queue : {cq_time:.4f} sn")

print("=" * 50)
print(f"\nğŸ“Š SonuÃ§: Deque, List'ten {list_time/deque_time:.0f}x hÄ±zlÄ±!")</textarea>
            
            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“ˆ KarmaÅŸÄ±klÄ±k GrafiÄŸi</h2>
        <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
            <canvas id="complexityChart" width="600" height="300"></canvas>
        </div>
        <p style="text-align: center; margin-top: 10px;">
            <span style="color: #27ae60;">â– </span> O(1) - Deque/Circular &nbsp;&nbsp;
            <span style="color: #e74c3c;">â– </span> O(n) - List pop(0)
        </p>
    </div>

    <div class="section">
        <h2>ğŸ’¡ Ne Zaman Hangisini KullanmalÄ±?</h2>
        <table class="complexity-table">
            <thead>
                <tr>
                    <th>Durum</th>
                    <th>Ã–nerilen</th>
                    <th>Neden?</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Genel AmaÃ§lÄ± Queue</td>
                    <td><code>collections.deque</code></td>
                    <td>O(1) performans, kolay kullanÄ±m</td>
                </tr>
                <tr>
                    <td>Sabit Boyutlu Buffer</td>
                    <td>Circular Queue</td>
                    <td>Bellek Ã¶ngÃ¶rÃ¼lebilirliÄŸi, gÃ¶mÃ¼lÃ¼ sistemler</td>
                </tr>
                <tr>
                    <td>Thread-Safe Queue</td>
                    <td><code>queue.Queue</code></td>
                    <td>Dahili kilit mekanizmasÄ±</td>
                </tr>
                <tr>
                    <td>Ã–ncelikli Ä°ÅŸlemler</td>
                    <td><code>heapq</code></td>
                    <td>Priority Queue iÃ§in optimize</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="nav-footer">
        <a href="3d_queue_ornekler.html" class="btn">â¬…ï¸ Ã–nceki: Ã–rnekler</a>
        <a href="queue.html" class="btn" style="background:#11998e">ğŸ“‹ Queue MenÃ¼</a>
        <a href="4a_linked_list_giris.html" class="btn btn-next">Sonraki: Linked List â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    // Pyodide
    let pyodideReady = false;
    let pyodide = null;
    async function main() { 
        pyodide = await loadPyodide(); 
        await pyodide.loadPackage("numpy");
        pyodideReady = true; 
    }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    function toggleEdit(id) {
        const view = document.getElementById('view-' + id);
        const editor = document.getElementById(id);
        if (editor.style.display === 'block') { editor.style.display = 'none'; view.style.display = 'block'; }
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
    
    // Simple Chart Drawing
    const canvas = document.getElementById('complexityChart');
    const ctx = canvas.getContext('2d');
    
    function drawChart() {
        ctx.clearRect(0, 0, 600, 300);
        
        // Axes
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(50, 250);
        ctx.lineTo(550, 250);
        ctx.moveTo(50, 250);
        ctx.lineTo(50, 30);
        ctx.stroke();
        
        // Labels
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.fillText('n (Eleman SayÄ±sÄ±)', 280, 280);
        ctx.save();
        ctx.translate(20, 150);
        ctx.rotate(-Math.PI/2);
        ctx.fillText('SÃ¼re', 0, 0);
        ctx.restore();
        
        // O(n) line - List
        ctx.strokeStyle = '#e74c3c';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(50, 250);
        ctx.lineTo(500, 50);
        ctx.stroke();
        ctx.fillStyle = '#e74c3c';
        ctx.fillText('O(n) - List', 510, 50);
        
        // O(1) line - Deque
        ctx.strokeStyle = '#27ae60';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(50, 230);
        ctx.lineTo(500, 230);
        ctx.stroke();
        ctx.fillStyle = '#27ae60';
        ctx.fillText('O(1) - Deque', 510, 235);
    }
    drawChart();
</script>
</body>
</html>

