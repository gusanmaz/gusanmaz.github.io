<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.7: Priority Queue - Ã–ncelikli Kuyruk</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .heap-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            min-height: 300px;
        }
        
        .heap-level {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .heap-node {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            position: relative;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .heap-node.highlight {
            background: linear-gradient(135deg, #f39c12 0%, #e74c3c 100%);
            transform: scale(1.2);
        }
        
        .heap-node.new {
            animation: bounceIn 0.5s;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .heap-edge {
            position: absolute;
            width: 2px;
            background: #999;
            transform-origin: top center;
        }
        
        .priority-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: white;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .priority-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .priority-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .priority-1 { background: #e74c3c; }
        .priority-2 { background: #f39c12; }
        .priority-3 { background: #3498db; }
        .priority-4 { background: #27ae60; }
        
        .compare-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }
        .compare-table th, .compare-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        .compare-table th {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .hospital-sim {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #fc8181;
        }
        
        .patient-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .patient-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid;
            transition: all 0.3s;
        }
        
        .patient-card.critical { border-color: #e74c3c; }
        .patient-card.urgent { border-color: #f39c12; }
        .patient-card.normal { border-color: #3498db; }
        
        .sim-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .input-group input, .input-group select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>â­ 3.7: Priority Queue (Ã–ncelikli Kuyruk)</h1>
        <p>Heap Veri YapÄ±sÄ± ve heapq ModÃ¼lÃ¼</p>
    </header>

    <div class="section">
        <h2>ğŸ¤” Priority Queue Nedir?</h2>
        <p><strong>Priority Queue</strong>, normal kuyruktan farklÄ± olarak elemanlarÄ± <em>Ã¶ncelik sÄ±rasÄ±na</em> gÃ¶re iÅŸler. En yÃ¼ksek (veya en dÃ¼ÅŸÃ¼k) Ã¶ncelikli eleman her zaman ilk Ã§Ä±kar.</p>
        
        <div style="display: flex; gap: 30px; margin: 20px 0; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 200px;">
                <h3>Normal Queue (FIFO)</h3>
                <div class="priority-item">
                    <span style="font-size: 24px;">1ï¸âƒ£</span>
                    <span>Ä°lk gelen â†’ Ä°lk Ã§Ä±kar</span>
                </div>
            </div>
            <div style="flex: 1; min-width: 200px;">
                <h3>Priority Queue</h3>
                <div class="priority-item">
                    <span style="font-size: 24px;">â­</span>
                    <span>En Ã¶ncelikli â†’ Ä°lk Ã§Ä±kar</span>
                </div>
            </div>
        </div>
        
        <h3>GerÃ§ek Hayat Ã–rnekleri</h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <div class="priority-item" style="flex:1; min-width:200px;">
                <div class="priority-badge priority-1">ğŸ¥</div>
                <div>
                    <strong>Acil Servis</strong>
                    <p style="margin:0; font-size:14px; color:#666;">Kalp krizi > KÄ±rÄ±k kol > SoÄŸuk algÄ±nlÄ±ÄŸÄ±</p>
                </div>
            </div>
            <div class="priority-item" style="flex:1; min-width:200px;">
                <div class="priority-badge priority-2">âœˆï¸</div>
                <div>
                    <strong>HavalimanÄ±</strong>
                    <p style="margin:0; font-size:14px; color:#666;">First Class > Business > Economy</p>
                </div>
            </div>
            <div class="priority-item" style="flex:1; min-width:200px;">
                <div class="priority-badge priority-3">ğŸ’»</div>
                <div>
                    <strong>Ä°ÅŸletim Sistemi</strong>
                    <p style="margin:0; font-size:14px; color:#666;">Sistem sÃ¼reci > KullanÄ±cÄ± uygulamasÄ±</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸŒ³ Heap Veri YapÄ±sÄ±</h2>
        <p>Priority Queue genellikle <strong>Binary Heap</strong> ile implemente edilir. Heap, tam ikili aÄŸaÃ§ (complete binary tree) Ã¶zelliÄŸini korur.</p>
        
        <div style="display: flex; gap: 30px; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 250px;">
                <h3>Min-Heap (En kÃ¼Ã§Ã¼k Ã¼stte)</h3>
                <div class="heap-tree" id="minHeap">
                    <div class="heap-level"><div class="heap-node">1</div></div>
                    <div class="heap-level">
                        <div class="heap-node">3</div>
                        <div class="heap-node">2</div>
                    </div>
                    <div class="heap-level">
                        <div class="heap-node">5</div>
                        <div class="heap-node">4</div>
                        <div class="heap-node">8</div>
                        <div class="heap-node">7</div>
                    </div>
                </div>
                <p style="text-align:center; color:#27ae60;">âœ… Her ebeveyn â‰¤ Ã§ocuklarÄ±ndan</p>
            </div>
            <div style="flex: 1; min-width: 250px;">
                <h3>Max-Heap (En bÃ¼yÃ¼k Ã¼stte)</h3>
                <div class="heap-tree" id="maxHeap">
                    <div class="heap-level"><div class="heap-node">9</div></div>
                    <div class="heap-level">
                        <div class="heap-node">7</div>
                        <div class="heap-node">8</div>
                    </div>
                    <div class="heap-level">
                        <div class="heap-node">5</div>
                        <div class="heap-node">6</div>
                        <div class="heap-node">3</div>
                        <div class="heap-node">4</div>
                    </div>
                </div>
                <p style="text-align:center; color:#e74c3c;">âœ… Her ebeveyn â‰¥ Ã§ocuklarÄ±ndan</p>
            </div>
        </div>
        
        <h3>Zaman KarmaÅŸÄ±klÄ±ÄŸÄ±</h3>
        <table class="compare-table">
            <thead>
                <tr>
                    <th>Operasyon</th>
                    <th>Heap</th>
                    <th>SÄ±ralÄ± Liste</th>
                    <th>SÄ±rasÄ±z Liste</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Insert (Ekleme)</strong></td>
                    <td style="color:#27ae60;">O(log n)</td>
                    <td style="color:#e74c3c;">O(n)</td>
                    <td style="color:#27ae60;">O(1)</td>
                </tr>
                <tr>
                    <td><strong>Extract Min/Max</strong></td>
                    <td style="color:#27ae60;">O(log n)</td>
                    <td style="color:#27ae60;">O(1)</td>
                    <td style="color:#e74c3c;">O(n)</td>
                </tr>
                <tr>
                    <td><strong>Peek (Bakma)</strong></td>
                    <td style="color:#27ae60;">O(1)</td>
                    <td style="color:#27ae60;">O(1)</td>
                    <td style="color:#e74c3c;">O(n)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>ğŸ Python heapq ModÃ¼lÃ¼</h2>
        <p>Python'da <code>heapq</code> modÃ¼lÃ¼ <strong>Min-Heap</strong> implementasyonu saÄŸlar.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code1"><code class="language-python">import heapq

print("ğŸŒ³ heapq Temel KullanÄ±m\n")

# BoÅŸ heap oluÅŸtur
heap = []

# Eleman ekle (heappush)
heapq.heappush(heap, 5)
heapq.heappush(heap, 2)
heapq.heappush(heap, 8)
heapq.heappush(heap, 1)
heapq.heappush(heap, 9)

print(f"Heap: {heap}")
print(f"En kÃ¼Ã§Ã¼k (peek): {heap[0]}")

# En kÃ¼Ã§Ã¼ÄŸÃ¼ Ã§Ä±kar (heappop)
print(f"\n--- Pop iÅŸlemleri ---")
while heap:
    en_kucuk = heapq.heappop(heap)
    print(f"Pop: {en_kucuk}")

# Liste'yi heap'e Ã§evir
print(f"\n--- heapify ---")
liste = [5, 2, 8, 1, 9, 3]
print(f"Ã–nce: {liste}")
heapq.heapify(liste)  # O(n) - yerinde dÃ¶nÃ¼ÅŸÃ¼m
print(f"Sonra: {liste}")

# En kÃ¼Ã§Ã¼k n eleman
sayilar = [15, 3, 8, 1, 20, 7, 12]
print(f"\n--- nsmallest & nlargest ---")
print(f"En kÃ¼Ã§Ã¼k 3: {heapq.nsmallest(3, sayilar)}")
print(f"En bÃ¼yÃ¼k 3: {heapq.nlargest(3, sayilar)}")</code></pre>

            <textarea id="code1" class="code-editor">import heapq

print("ğŸŒ³ heapq Temel KullanÄ±m\n")

heap = []
heapq.heappush(heap, 5)
heapq.heappush(heap, 2)
heapq.heappush(heap, 8)
heapq.heappush(heap, 1)
heapq.heappush(heap, 9)

print(f"Heap: {heap}")
print(f"En kÃ¼Ã§Ã¼k (peek): {heap[0]}")

print(f"\n--- Pop iÅŸlemleri ---")
while heap:
    print(f"Pop: {heapq.heappop(heap)}")

liste = [5, 2, 8, 1, 9, 3]
print(f"\n--- heapify ---")
print(f"Ã–nce: {liste}")
heapq.heapify(liste)
print(f"Sonra: {liste}")

sayilar = [15, 3, 8, 1, 20, 7, 12]
print(f"\n--- nsmallest & nlargest ---")
print(f"En kÃ¼Ã§Ã¼k 3: {heapq.nsmallest(3, sayilar)}")
print(f"En bÃ¼yÃ¼k 3: {heapq.nlargest(3, sayilar)}")</textarea>
            
            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ¥ Uygulama: Acil Servis SimÃ¼lasyonu</h2>
        <div class="hospital-sim">
            <h3>ğŸš‘ Hastane Acil Servisi</h3>
            <p>Hastalar Ã¶ncelik sÄ±rasÄ±na gÃ¶re muayene edilir. (1 = Kritik, 5 = Hafif)</p>
            
            <div class="sim-controls">
                <div class="input-group">
                    <input type="text" id="patientName" placeholder="Hasta adÄ±" value="Hasta">
                    <select id="patientPriority">
                        <option value="1">ğŸ”´ Kritik (1)</option>
                        <option value="2">ğŸŸ  Acil (2)</option>
                        <option value="3" selected>ğŸŸ¡ Orta (3)</option>
                        <option value="4">ğŸŸ¢ Hafif (4)</option>
                    </select>
                    <button class="btn btn-run" onclick="addPatient()">+ Hasta Ekle</button>
                </div>
                <button class="btn btn-next" onclick="treatNext()">ğŸ‘¨â€âš•ï¸ SÄ±radakini Muayene Et</button>
            </div>
            
            <div style="margin-top: 20px;">
                <h4>Bekleme Listesi:</h4>
                <div id="patientList" class="patient-list">
                    <p style="color:#666; text-align:center;">HenÃ¼z hasta yok...</p>
                </div>
            </div>
            
            <div id="treatmentLog" style="margin-top: 15px; padding: 10px; background: white; border-radius: 8px; font-family: monospace; font-size: 14px;"></div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ’» Priority Queue SÄ±nÄ±fÄ±</h2>
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code2')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code2')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code2"><code class="language-python">import heapq
from dataclasses import dataclass, field
from typing import Any

@dataclass(order=True)
class PrioritizedItem:
    """Ã–ncelikli eleman sarmalayÄ±cÄ±sÄ±"""
    priority: int
    item: Any = field(compare=False)

class PriorityQueue:
    def __init__(self):
        self._heap = []
        self._counter = 0  # AynÄ± Ã¶ncelikteki elemanlar iÃ§in sÄ±ra
    
    def push(self, item, priority):
        """Eleman ekle (dÃ¼ÅŸÃ¼k sayÄ± = yÃ¼ksek Ã¶ncelik)"""
        # Counter ile FIFO davranÄ±ÅŸÄ± saÄŸla
        entry = (priority, self._counter, item)
        heapq.heappush(self._heap, entry)
        self._counter += 1
    
    def pop(self):
        """En Ã¶ncelikli elemanÄ± Ã§Ä±kar"""
        if self._heap:
            priority, count, item = heapq.heappop(self._heap)
            return item
        raise IndexError("Queue boÅŸ!")
    
    def peek(self):
        """En Ã¶ncelikli elemana bak"""
        if self._heap:
            return self._heap[0][2]
        return None
    
    def __len__(self):
        return len(self._heap)
    
    def is_empty(self):
        return len(self._heap) == 0

# ğŸ¥ Acil Servis SimÃ¼lasyonu
print("ğŸ¥ Acil Servis SimÃ¼lasyonu\n")

acil_servis = PriorityQueue()

# Hastalar geliyor (dÃ¼ÅŸÃ¼k sayÄ± = daha acil)
hastalar = [
    ("Ahmet", 3, "BaÅŸ aÄŸrÄ±sÄ±"),
    ("Fatma", 1, "Kalp krizi"),
    ("Mehmet", 2, "KÄ±rÄ±k kol"),
    ("AyÅŸe", 4, "SoÄŸuk algÄ±nlÄ±ÄŸÄ±"),
    ("Ali", 1, "AÄŸÄ±r yanÄ±k"),
]

print("ğŸ“‹ Hastalar kaydediliyor...")
for isim, oncelik, sikayet in hastalar:
    acil_servis.push(f"{isim} ({sikayet})", oncelik)
    print(f"   [{oncelik}] {isim}: {sikayet}")

print(f"\nğŸ‘¨â€âš•ï¸ Muayene sÄ±rasÄ± (Ã¶nceliÄŸe gÃ¶re):")
sira = 1
while not acil_servis.is_empty():
    hasta = acil_servis.pop()
    print(f"   {sira}. {hasta}")
    sira += 1</code></pre>

            <textarea id="code2" class="code-editor">import heapq
from dataclasses import dataclass, field
from typing import Any

class PriorityQueue:
    def __init__(self):
        self._heap = []
        self._counter = 0
    
    def push(self, item, priority):
        entry = (priority, self._counter, item)
        heapq.heappush(self._heap, entry)
        self._counter += 1
    
    def pop(self):
        if self._heap:
            priority, count, item = heapq.heappop(self._heap)
            return item
        raise IndexError("Queue boÅŸ!")
    
    def is_empty(self):
        return len(self._heap) == 0

print("ğŸ¥ Acil Servis SimÃ¼lasyonu\n")

acil_servis = PriorityQueue()

hastalar = [
    ("Ahmet", 3, "BaÅŸ aÄŸrÄ±sÄ±"),
    ("Fatma", 1, "Kalp krizi"),
    ("Mehmet", 2, "KÄ±rÄ±k kol"),
    ("AyÅŸe", 4, "SoÄŸuk algÄ±nlÄ±ÄŸÄ±"),
    ("Ali", 1, "AÄŸÄ±r yanÄ±k"),
]

print("ğŸ“‹ Hastalar kaydediliyor...")
for isim, oncelik, sikayet in hastalar:
    acil_servis.push(f"{isim} ({sikayet})", oncelik)
    print(f"   [{oncelik}] {isim}: {sikayet}")

print(f"\nğŸ‘¨â€âš•ï¸ Muayene sÄ±rasÄ±:")
sira = 1
while not acil_servis.is_empty():
    print(f"   {sira}. {acil_servis.pop()}")
    sira += 1</textarea>
            
            <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”§ Dijkstra'nÄ±n En KÄ±sa Yol AlgoritmasÄ±</h2>
        <p>Priority Queue'nun en Ã¼nlÃ¼ kullanÄ±m alanlarÄ±ndan biri <strong>Dijkstra algoritmasÄ±</strong>dÄ±r. GPS navigasyonunda kullanÄ±lÄ±r.</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code3')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code3')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code3"><code class="language-python">import heapq

def dijkstra(graf, baslangic):
    """
    Dijkstra'nÄ±n En KÄ±sa Yol AlgoritmasÄ±
    Priority Queue ile aÄŸÄ±rlÄ±klÄ± grafta en kÄ±sa yollarÄ± bulur.
    """
    # BaÅŸlangÄ±Ã§ mesafeleri sonsuz
    mesafeler = {dugum: float('infinity') for dugum in graf}
    mesafeler[baslangic] = 0
    
    # Priority Queue: (mesafe, dÃ¼ÄŸÃ¼m)
    pq = [(0, baslangic)]
    
    while pq:
        mevcut_mesafe, mevcut = heapq.heappop(pq)
        
        # Daha kÄ±sa yol zaten bulunmuÅŸsa atla
        if mevcut_mesafe > mesafeler[mevcut]:
            continue
        
        # KomÅŸularÄ± kontrol et
        for komsu, agirlik in graf[mevcut].items():
            yeni_mesafe = mevcut_mesafe + agirlik
            
            # Daha kÄ±sa yol bulduk mu?
            if yeni_mesafe < mesafeler[komsu]:
                mesafeler[komsu] = yeni_mesafe
                heapq.heappush(pq, (yeni_mesafe, komsu))
    
    return mesafeler

# Åehirler arasÄ± mesafe (km)
turkiye = {
    'Ä°stanbul': {'Ankara': 450, 'Bursa': 150, 'Ä°zmir': 480},
    'Ankara': {'Ä°stanbul': 450, 'Konya': 260, 'Ä°zmir': 580},
    'Bursa': {'Ä°stanbul': 150, 'Ä°zmir': 330},
    'Ä°zmir': {'Ä°stanbul': 480, 'Ankara': 580, 'Bursa': 330, 'Antalya': 450},
    'Konya': {'Ankara': 260, 'Antalya': 300},
    'Antalya': {'Ä°zmir': 450, 'Konya': 300}
}

print("ğŸ—ºï¸ Dijkstra - TÃ¼rkiye HaritasÄ±\n")
print("Åehirler:", list(turkiye.keys()))

baslangic = "Ä°stanbul"
sonuclar = dijkstra(turkiye, baslangic)

print(f"\nğŸ“ {baslangic}'dan tÃ¼m ÅŸehirlere en kÄ±sa mesafeler:")
for sehir, mesafe in sorted(sonuclar.items(), key=lambda x: x[1]):
    print(f"   {sehir}: {mesafe} km")</code></pre>

            <textarea id="code3" class="code-editor">import heapq

def dijkstra(graf, baslangic):
    mesafeler = {dugum: float('infinity') for dugum in graf}
    mesafeler[baslangic] = 0
    pq = [(0, baslangic)]
    
    while pq:
        mevcut_mesafe, mevcut = heapq.heappop(pq)
        if mevcut_mesafe > mesafeler[mevcut]:
            continue
        for komsu, agirlik in graf[mevcut].items():
            yeni_mesafe = mevcut_mesafe + agirlik
            if yeni_mesafe < mesafeler[komsu]:
                mesafeler[komsu] = yeni_mesafe
                heapq.heappush(pq, (yeni_mesafe, komsu))
    return mesafeler

turkiye = {
    'Ä°stanbul': {'Ankara': 450, 'Bursa': 150, 'Ä°zmir': 480},
    'Ankara': {'Ä°stanbul': 450, 'Konya': 260, 'Ä°zmir': 580},
    'Bursa': {'Ä°stanbul': 150, 'Ä°zmir': 330},
    'Ä°zmir': {'Ä°stanbul': 480, 'Ankara': 580, 'Bursa': 330, 'Antalya': 450},
    'Konya': {'Ankara': 260, 'Antalya': 300},
    'Antalya': {'Ä°zmir': 450, 'Konya': 300}
}

print("ğŸ—ºï¸ Dijkstra - TÃ¼rkiye HaritasÄ±\n")
sonuclar = dijkstra(turkiye, "Ä°stanbul")
print(f"ğŸ“ Ä°stanbul'dan mesafeler:")
for sehir, mesafe in sorted(sonuclar.items(), key=lambda x: x[1]):
    print(f"   {sehir}: {mesafe} km")</textarea>
            
            <div id="output-code3" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="nav-footer">
        <a href="3f_queue_bfs.html" class="btn">â¬…ï¸ Ã–nceki: BFS</a>
        <a href="queue.html" class="btn" style="background:#11998e">ğŸ“‹ Queue MenÃ¼</a>
        <a href="4a_linked_list_giris.html" class="btn btn-next">Sonraki: Linked List â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    // Acil Servis SimÃ¼lasyonu
    let patients = [];
    let patientCounter = 0;
    
    function addPatient() {
        const name = document.getElementById('patientName').value || 'Hasta';
        const priority = parseInt(document.getElementById('patientPriority').value);
        
        patientCounter++;
        patients.push({
            id: patientCounter,
            name: `${name} #${patientCounter}`,
            priority: priority,
            time: Date.now()
        });
        
        // Sort by priority, then by time
        patients.sort((a, b) => {
            if (a.priority !== b.priority) return a.priority - b.priority;
            return a.time - b.time;
        });
        
        updatePatientList();
    }
    
    function treatNext() {
        if (patients.length === 0) {
            document.getElementById('treatmentLog').innerHTML = 'âŒ Bekleyen hasta yok!';
            return;
        }
        
        const patient = patients.shift();
        const priorityLabels = {1: 'Kritik', 2: 'Acil', 3: 'Orta', 4: 'Hafif'};
        document.getElementById('treatmentLog').innerHTML = 
            `âœ… <strong>${patient.name}</strong> muayene edildi. (Ã–ncelik: ${priorityLabels[patient.priority]})`;
        
        updatePatientList();
    }
    
    function updatePatientList() {
        const list = document.getElementById('patientList');
        
        if (patients.length === 0) {
            list.innerHTML = '<p style="color:#666; text-align:center;">HenÃ¼z hasta yok...</p>';
            return;
        }
        
        const priorityColors = {1: 'critical', 2: 'urgent', 3: 'normal', 4: 'normal'};
        const priorityLabels = {1: 'ğŸ”´ Kritik', 2: 'ğŸŸ  Acil', 3: 'ğŸŸ¡ Orta', 4: 'ğŸŸ¢ Hafif'};
        
        list.innerHTML = patients.map((p, i) => `
            <div class="patient-card ${priorityColors[p.priority]}">
                <span style="font-weight:bold; color:#666;">#${i+1}</span>
                <span style="flex:1;">${p.name}</span>
                <span style="font-size:12px;">${priorityLabels[p.priority]}</span>
            </div>
        `).join('');
    }
    
    // Pyodide
    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    function toggleEdit(id) {
        const view = document.getElementById('view-' + id);
        const editor = document.getElementById(id);
        if (editor.style.display === 'block') { editor.style.display = 'none'; view.style.display = 'block'; }
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
</script>
</body>
</html>

