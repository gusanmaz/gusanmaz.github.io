<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4.3: Doubly Linked List (Ã‡ift YÃ¶nlÃ¼ Liste)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .doubly-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            padding: 20px;
            overflow-x: auto;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .doubly-node {
            display: flex;
            border: 3px solid #2c3e50;
            border-radius: 10px;
            overflow: hidden;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .doubly-node:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .doubly-node .prev-ptr {
            padding: 10px 12px;
            background: #9b59b6;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .doubly-node .data {
            padding: 15px 25px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            font-weight: bold;
            font-size: 18px;
            min-width: 40px;
            text-align: center;
        }
        
        .doubly-node .next-ptr {
            padding: 10px 12px;
            background: #27ae60;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .arrow-both {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 5px;
            font-size: 16px;
        }
        
        .arrow-both .forward { color: #27ae60; }
        .arrow-both .backward { color: #9b59b6; }
        
        .null-marker {
            padding: 8px 15px;
            background: #e74c3c;
            color: white;
            border-radius: 8px;
            font-weight: bold;
            font-size: 12px;
        }
        
        .advantage-card {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border: 2px solid #4caf50;
            padding: 20px;
            border-radius: 12px;
            margin: 10px 0;
        }
        
        .disadvantage-card {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 2px solid #f44336;
            padding: 20px;
            border-radius: 12px;
            margin: 10px 0;
        }
        
        .interactive-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        
        .current-marker {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #f39c12;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>â†”ï¸ 4.3: Doubly Linked List</h1>
        <p>Ã‡ift YÃ¶nlÃ¼ BaÄŸlÄ± Liste - Ä°leri ve Geri Gitme</p>
    </header>

    <div class="section">
        <h2>ğŸ¤” Doubly Linked List Nedir?</h2>
        <p>Her node hem <strong>Ã¶nceki (prev)</strong> hem de <strong>sonraki (next)</strong> node'a iÅŸaretÃ§i tutar. Bu sayede listede <em>iki yÃ¶nlÃ¼</em> hareket edebiliriz.</p>
        
        <div class="doubly-visual">
            <div class="null-marker">NULL</div>
            <div class="arrow-both">
                <span class="backward">â†</span>
            </div>
            <div class="doubly-node">
                <div class="prev-ptr">prev</div>
                <div class="data">A</div>
                <div class="next-ptr">next</div>
            </div>
            <div class="arrow-both">
                <span class="forward">â†’</span>
                <span class="backward">â†</span>
            </div>
            <div class="doubly-node">
                <div class="prev-ptr">prev</div>
                <div class="data">B</div>
                <div class="next-ptr">next</div>
            </div>
            <div class="arrow-both">
                <span class="forward">â†’</span>
                <span class="backward">â†</span>
            </div>
            <div class="doubly-node">
                <div class="prev-ptr">prev</div>
                <div class="data">C</div>
                <div class="next-ptr">next</div>
            </div>
            <div class="arrow-both">
                <span class="forward">â†’</span>
            </div>
            <div class="null-marker">NULL</div>
        </div>
        
        <div style="text-align: center; color: #666;">
            <span style="color: #9b59b6;">â—€ prev</span> | 
            <span style="color: #3498db;">DATA</span> | 
            <span style="color: #27ae60;">next â–¶</span>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ® Ä°nteraktif SimÃ¼lasyon</h2>
        <div class="interactive-container">
            <div class="doubly-visual" id="doublyList"></div>
            
            <div style="text-align: center; margin: 15px 0;">
                <div id="currentInfo" style="font-size: 16px; color: #555;"></div>
            </div>
            
            <div class="controls">
                <button class="btn btn-run" onclick="addToEnd()">â• Sona Ekle</button>
                <button class="btn" style="background: #9b59b6;" onclick="addToStart()">â¬…ï¸ BaÅŸa Ekle</button>
                <button class="btn btn-reset" onclick="removeSelected()">ğŸ—‘ï¸ SeÃ§ili Sil</button>
                <button class="btn" style="background: #3498db;" onclick="moveLeft()">â—€ Geri</button>
                <button class="btn" style="background: #27ae60;" onclick="moveRight()">Ä°leri â–¶</button>
                <button class="btn" style="background: #e67e22;" onclick="resetDoubly()">ğŸ”„ SÄ±fÄ±rla</button>
            </div>
            
            <p id="doublyMsg" style="text-align: center; font-weight: bold; margin-top: 15px; color: #555;"></p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š Singly vs Doubly KarÅŸÄ±laÅŸtÄ±rma</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="disadvantage-card" style="background: linear-gradient(135deg, #fff8e1, #ffecb3); border-color: #ffc107;">
                <h4 style="margin-top: 0; color: #f57f17;">â¡ï¸ Singly Linked List</h4>
                <ul style="margin: 0; padding-left: 20px;">
                    <li>Sadece ileri gidebilir</li>
                    <li>Daha az hafÄ±za (1 pointer)</li>
                    <li>Silme iÃ§in Ã¶nceki node lazÄ±m</li>
                    <li>Sondan silme O(n)</li>
                </ul>
            </div>
            <div class="advantage-card">
                <h4 style="margin-top: 0; color: #2e7d32;">â†”ï¸ Doubly Linked List</h4>
                <ul style="margin: 0; padding-left: 20px;">
                    <li>Ä°leri ve geri gidebilir</li>
                    <li>Daha fazla hafÄ±za (2 pointer)</li>
                    <li>Silme kolaylaÅŸÄ±r (prev var)</li>
                    <li>Sondan silme O(1) (tail ile)</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ’» Python Implementasyonu</h2>
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code1"><code class="language-python">class DoublyNode:
    """Ã‡ift yÃ¶nlÃ¼ baÄŸlÄ± liste dÃ¼ÄŸÃ¼mÃ¼"""
    def __init__(self, data):
        self.data = data
        self.prev = None  # Ã–nceki node
        self.next = None  # Sonraki node

class DoublyLinkedList:
    """Ã‡ift YÃ¶nlÃ¼ BaÄŸlÄ± Liste"""
    
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0
    
    def append(self, data):
        """Sona ekle - O(1)"""
        new_node = DoublyNode(data)
        
        if not self.head:
            self.head = self.tail = new_node
        else:
            new_node.prev = self.tail
            self.tail.next = new_node
            self.tail = new_node
        
        self.size += 1
        print(f"âœ… Sona eklendi: {data}")
    
    def prepend(self, data):
        """BaÅŸa ekle - O(1)"""
        new_node = DoublyNode(data)
        
        if not self.head:
            self.head = self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node
        
        self.size += 1
        print(f"âœ… BaÅŸa eklendi: {data}")
    
    def delete_node(self, node):
        """Belirli node'u sil - O(1)"""
        if not node:
            return
        
        # Ã–nceki node'un next'ini gÃ¼ncelle
        if node.prev:
            node.prev.next = node.next
        else:
            self.head = node.next  # Silinen head ise
        
        # Sonraki node'un prev'ini gÃ¼ncelle
        if node.next:
            node.next.prev = node.prev
        else:
            self.tail = node.prev  # Silinen tail ise
        
        self.size -= 1
        print(f"ğŸ—‘ï¸ Silindi: {node.data}")
    
    def pop_back(self):
        """Sondan sil - O(1) ğŸ‰"""
        if not self.tail:
            print("âŒ Liste boÅŸ!")
            return None
        
        data = self.tail.data
        self.delete_node(self.tail)
        return data
    
    def pop_front(self):
        """BaÅŸtan sil - O(1)"""
        if not self.head:
            print("âŒ Liste boÅŸ!")
            return None
        
        data = self.head.data
        self.delete_node(self.head)
        return data
    
    def display_forward(self):
        """Ä°leri doÄŸru gÃ¶ster"""
        if not self.head:
            print("Liste: [BOÅ]")
            return
        
        elements = []
        current = self.head
        while current:
            elements.append(str(current.data))
            current = current.next
        
        print(f"Ä°leri  â†’ : NULL â† {' âŸ· '.join(elements)} â†’ NULL")
    
    def display_backward(self):
        """Geri doÄŸru gÃ¶ster"""
        if not self.tail:
            print("Liste: [BOÅ]")
            return
        
        elements = []
        current = self.tail
        while current:
            elements.append(str(current.data))
            current = current.prev
        
        print(f"Geri  â† : {' âŸ· '.join(elements)}")

# Test
print("â†”ï¸ Doubly Linked List Demo\n")
dll = DoublyLinkedList()

dll.append(10)
dll.append(20)
dll.append(30)
dll.display_forward()

print()
dll.prepend(5)
dll.display_forward()
dll.display_backward()

print()
print("ğŸ‰ Sondan silme O(1):")
dll.pop_back()
dll.display_forward()

print()
print("ğŸ‰ BaÅŸtan silme O(1):")
dll.pop_front()
dll.display_forward()</code></pre>

            <textarea id="code1" class="code-editor">class DoublyNode:
    def __init__(self, data):
        self.data = data
        self.prev = None
        self.next = None

class DoublyLinkedList:
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0
    
    def append(self, data):
        new_node = DoublyNode(data)
        if not self.head:
            self.head = self.tail = new_node
        else:
            new_node.prev = self.tail
            self.tail.next = new_node
            self.tail = new_node
        self.size += 1
        print(f"âœ… Sona eklendi: {data}")
    
    def prepend(self, data):
        new_node = DoublyNode(data)
        if not self.head:
            self.head = self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node
        self.size += 1
        print(f"âœ… BaÅŸa eklendi: {data}")
    
    def pop_back(self):
        if not self.tail: return
        data = self.tail.data
        if self.tail.prev:
            self.tail = self.tail.prev
            self.tail.next = None
        else:
            self.head = self.tail = None
        print(f"ğŸ—‘ï¸ Sondan silindi: {data}")
    
    def display(self):
        elements = []
        current = self.head
        while current:
            elements.append(str(current.data))
            current = current.next
        print(f"Liste: {' âŸ· '.join(elements) if elements else '[BOÅ]'}")

dll = DoublyLinkedList()
dll.append(10)
dll.append(20)
dll.append(30)
dll.display()
dll.prepend(5)
dll.display()
dll.pop_back()
dll.display()</textarea>
            
            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ¯ KullanÄ±m AlanlarÄ±</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; text-align: center;">
                <span style="font-size: 2em;">ğŸŒ</span>
                <h4>TarayÄ±cÄ± GeÃ§miÅŸi</h4>
                <p style="font-size: 14px;">Ä°leri/Geri butonlarÄ±</p>
            </div>
            <div style="background: #f3e5f5; padding: 15px; border-radius: 10px; text-align: center;">
                <span style="font-size: 2em;">ğŸµ</span>
                <h4>MÃ¼zik Ã‡alar</h4>
                <p style="font-size: 14px;">Ã–nceki/Sonraki ÅŸarkÄ±</p>
            </div>
            <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; text-align: center;">
                <span style="font-size: 2em;">ğŸ“</span>
                <h4>Metin EditÃ¶rÃ¼</h4>
                <p style="font-size: 14px;">Undo/Redo iÅŸlemleri</p>
            </div>
            <div style="background: #fff3e0; padding: 15px; border-radius: 10px; text-align: center;">
                <span style="font-size: 2em;">ğŸ®</span>
                <h4>LRU Cache</h4>
                <p style="font-size: 14px;">En az kullanÄ±lan Ã¶nbellek</p>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š Zaman KarmaÅŸÄ±klÄ±ÄŸÄ±</h2>
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
            <thead>
                <tr style="background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white;">
                    <th style="padding: 15px;">Operasyon</th>
                    <th style="padding: 15px;">Singly</th>
                    <th style="padding: 15px;">Doubly</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">BaÅŸa Ekleme</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">Sona Ekleme (tail ile)</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">BaÅŸtan Silme</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1)</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee; background: #e8f5e9;">
                    <td style="padding: 12px;"><strong>Sondan Silme</strong></td>
                    <td style="padding: 12px; color: #e74c3c; font-weight: bold;">O(n) ğŸ˜¢</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1) ğŸ‰</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee; background: #e8f5e9;">
                    <td style="padding: 12px;"><strong>Verilen Node'u Silme</strong></td>
                    <td style="padding: 12px; color: #e74c3c; font-weight: bold;">O(n)</td>
                    <td style="padding: 12px; color: #27ae60; font-weight: bold;">O(1) ğŸ‰</td>
                </tr>
                <tr>
                    <td style="padding: 12px;">HafÄ±za (node baÅŸÄ±na)</td>
                    <td style="padding: 12px;">data + 1 pointer</td>
                    <td style="padding: 12px;">data + 2 pointer</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="nav-footer">
        <a href="4b_linked_list_tek.html" class="btn">â¬…ï¸ Ã–nceki: Singly</a>
        <a href="4d_linked_list_circular.html" class="btn btn-next">Sonraki: Circular â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    // Interactive Doubly Linked List
    let doublyNodes = ['A', 'B', 'C'];
    let currentIndex = 0;
    let nodeCounter = 3;
    
    function renderDoubly() {
        const container = document.getElementById('doublyList');
        container.innerHTML = '';
        
        // NULL baÅŸlangÄ±Ã§
        container.innerHTML += '<div class="null-marker">NULL</div>';
        container.innerHTML += '<div class="arrow-both"><span class="backward">â†</span></div>';
        
        doublyNodes.forEach((data, index) => {
            const isSelected = index === currentIndex;
            const nodeHtml = `
                <div class="doubly-node" style="${isSelected ? 'border-color: #f39c12; box-shadow: 0 0 15px rgba(243,156,18,0.5);' : ''}" onclick="selectNode(${index})">
                    ${isSelected ? '<div class="current-marker">CURRENT</div>' : ''}
                    <div class="prev-ptr">prev</div>
                    <div class="data">${data}</div>
                    <div class="next-ptr">next</div>
                </div>
            `;
            
            container.innerHTML += nodeHtml;
            
            if (index < doublyNodes.length - 1) {
                container.innerHTML += '<div class="arrow-both"><span class="forward">â†’</span><span class="backward">â†</span></div>';
            }
        });
        
        // NULL bitiÅŸ
        container.innerHTML += '<div class="arrow-both"><span class="forward">â†’</span></div>';
        container.innerHTML += '<div class="null-marker">NULL</div>';
        
        updateInfo();
    }
    
    function updateInfo() {
        const info = document.getElementById('currentInfo');
        if (doublyNodes.length === 0) {
            info.innerHTML = 'Liste boÅŸ';
            return;
        }
        
        const prev = currentIndex > 0 ? doublyNodes[currentIndex - 1] : 'NULL';
        const next = currentIndex < doublyNodes.length - 1 ? doublyNodes[currentIndex + 1] : 'NULL';
        
        info.innerHTML = `
            <span style="color:#9b59b6;">prev: ${prev}</span> | 
            <span style="color:#f39c12; font-weight:bold;">current: ${doublyNodes[currentIndex]}</span> | 
            <span style="color:#27ae60;">next: ${next}</span>
        `;
    }
    
    function selectNode(index) {
        currentIndex = index;
        renderDoubly();
    }
    
    function moveLeft() {
        if (currentIndex > 0) {
            currentIndex--;
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#9b59b6;">â—€ Geri gidildi (prev kullanÄ±ldÄ±)</span>';
        } else {
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#e74c3c;">âš ï¸ BaÅŸa ulaÅŸÄ±ldÄ±!</span>';
        }
        renderDoubly();
    }
    
    function moveRight() {
        if (currentIndex < doublyNodes.length - 1) {
            currentIndex++;
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#27ae60;">Ä°leri gidildi (next kullanÄ±ldÄ±) â–¶</span>';
        } else {
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#e74c3c;">âš ï¸ Sona ulaÅŸÄ±ldÄ±!</span>';
        }
        renderDoubly();
    }
    
    function addToEnd() {
        if (doublyNodes.length >= 5) {
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#e74c3c;">âš ï¸ Maksimum 5 node!</span>';
            return;
        }
        const newData = String.fromCharCode(65 + nodeCounter);
        doublyNodes.push(newData);
        nodeCounter++;
        document.getElementById('doublyMsg').innerHTML = `<span style="color:#27ae60;">âœ… "${newData}" sona eklendi - O(1)</span>`;
        renderDoubly();
    }
    
    function addToStart() {
        if (doublyNodes.length >= 5) {
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#e74c3c;">âš ï¸ Maksimum 5 node!</span>';
            return;
        }
        const newData = String.fromCharCode(65 + nodeCounter);
        doublyNodes.unshift(newData);
        nodeCounter++;
        currentIndex++;
        document.getElementById('doublyMsg').innerHTML = `<span style="color:#9b59b6;">âœ… "${newData}" baÅŸa eklendi - O(1)</span>`;
        renderDoubly();
    }
    
    function removeSelected() {
        if (doublyNodes.length === 0) {
            document.getElementById('doublyMsg').innerHTML = '<span style="color:#e74c3c;">âš ï¸ Liste boÅŸ!</span>';
            return;
        }
        const removed = doublyNodes.splice(currentIndex, 1)[0];
        if (currentIndex >= doublyNodes.length && currentIndex > 0) currentIndex--;
        document.getElementById('doublyMsg').innerHTML = `<span style="color:#e67e22;">ğŸ—‘ï¸ "${removed}" silindi - O(1) (prev ve next gÃ¼ncellendi)</span>`;
        renderDoubly();
    }
    
    function resetDoubly() {
        doublyNodes = ['A', 'B', 'C'];
        currentIndex = 0;
        nodeCounter = 3;
        document.getElementById('doublyMsg').innerHTML = '<span style="color:#555;">ğŸ”„ Liste sÄ±fÄ±rlandÄ±</span>';
        renderDoubly();
    }
    
    // Pyodide
    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    function toggleEdit(id) {
        const view = document.getElementById('view-' + id);
        const editor = document.getElementById(id);
        if (editor.style.display === 'block') { editor.style.display = 'none'; view.style.display = 'block'; }
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
    
    // Initialize
    renderDoubly();
</script>
</body>
</html>

