<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3.3: Python ile Queue PratiÄŸi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .warning-box {
            background: linear-gradient(135deg, #fff3cd, #ffeeba);
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .danger-box {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border: 2px solid #dc3545;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .success-box {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border: 2px solid #28a745;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸš€ 3.3: Python Deque ve Wrapper SÄ±nÄ±flar</h1>
        <p>Neden HazÄ±r YapÄ±larÄ± SarmalamalÄ±yÄ±z?</p>
    </header>

    <div class="section">
        <h2>âš ï¸ Neden Python List Queue Olamaz?</h2>
        <p>Python listeleri hafÄ±zada <strong>bitiÅŸik (contiguous)</strong> durur. Bu, C'deki dizilere benzer bir yapÄ±dÄ±r.</p>
        <p><code>pop(0)</code> ile en baÅŸtan eleman silerseniz, geriye kalan <strong>TÃœM</strong> elemanlar bir adÄ±m sola kaymak zorundadÄ±r.</p>

        <div class="warning-box">
            <h4 style="margin-top:0;">ğŸ“Š KaydÄ±rma (Shifting) Maliyeti</h4>
            <ul>
                <li>10 elemanlÄ± listede: 9 kaydÄ±rma iÅŸlemi</li>
                <li>1,000 elemanlÄ± listede: 999 kaydÄ±rma iÅŸlemi</li>
                <li>1,000,000 elemanlÄ± listede: 999,999 kaydÄ±rma iÅŸlemi!</li>
            </ul>
            <p><strong>SonuÃ§:</strong> <code>list.pop(0)</code> â†’ <span style="color:red;">O(n)</span> zaman karmaÅŸÄ±klÄ±ÄŸÄ±</p>
        </div>
    </div>

    <div class="section">
        <h2>âœ… Ã‡Ã¶zÃ¼m: collections.deque</h2>
        <p><strong>Deque (Double Ended Queue)</strong>, iki ucu aÃ§Ä±k boru gibidir. Ä°Ã§eride <strong>doubly linked list</strong> benzeri bir yapÄ± kullanÄ±r.</p>
        <p>Hem baÅŸtan hem sondan ekleme/Ã§Ä±karma iÅŸlemleri <strong>O(1)</strong> sabit zamanda gerÃ§ekleÅŸir.</p>

        <div style="display:flex; justify-content:center; gap:20px; margin:20px 0; font-family:monospace; flex-wrap:wrap;">
            <div style="padding:10px 15px; border:2px solid #27ae60; border-radius:5px; background:#f0fff4;">
                appendleft() â¬…ï¸ [ DEQUE ] â¡ï¸ append()
            </div>
            <div style="padding:10px 15px; border:2px solid #c0392b; border-radius:5px; background:#fff5f5;">
                popleft() â¬…ï¸ [ DEQUE ] â¡ï¸ pop()
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ¤” Deque'nin Problemi: Ã‡ok Esnek!</h2>

        <div class="danger-box">
            <h4 style="margin-top:0; color:#721c24;">âŒ Sorun: KullanÄ±cÄ± KÄ±sÄ±tlanmÄ±yor</h4>
            <p><code>deque</code> hem Stack hem Queue gibi kullanÄ±labilir, ama bu <strong>tehlikelidir</strong>:</p>

            <pre style="background:#2d2d30; color:#f8d7da; padding:15px; border-radius:8px; margin:10px 0;"><code># Diyelim ki "Queue" olarak kullanmak istiyoruz
from collections import deque
kuyruk = deque()

kuyruk.append("Ali")     # âœ… DoÄŸru: Sona ekle
kuyruk.append("Veli")    # âœ… DoÄŸru: Sona ekle
kuyruk.popleft()         # âœ… DoÄŸru: BaÅŸtan Ã§Ä±kar (FIFO)

# AMA kullanÄ±cÄ± yanlÄ±ÅŸlÄ±kla:
kuyruk.pop()             # âŒ YANLIÅ! Sondan Ã§Ä±kardÄ± (Stack gibi!)
kuyruk.appendleft("X")   # âŒ YANLIÅ! BaÅŸa ekledi (Queue'da yasak!)
</code></pre>

            <p><strong>Veri yapÄ±sÄ± kurallarÄ± ihlal edildi!</strong> Queue FIFO olmalÄ±, ama kullanÄ±cÄ± LIFO iÅŸlemi yaptÄ±.</p>
        </div>

        <div class="success-box">
            <h4 style="margin-top:0; color:#155724;">âœ… Ã‡Ã¶zÃ¼m: Wrapper Class ile KÄ±sÄ±tlama</h4>
            <p>KullanÄ±cÄ±ya <strong>sadece izin verilen metodlarÄ±</strong> sunarak veri yapÄ±sÄ± kurallarÄ±nÄ± zorla:</p>
            <ul>
                <li>Queue iÃ§in: Sadece <code>enqueue()</code> ve <code>dequeue()</code></li>
                <li>Stack iÃ§in: Sadece <code>push()</code> ve <code>pop()</code></li>
            </ul>
            <p>Bu ÅŸekilde kullanÄ±cÄ± yanlÄ±ÅŸlÄ±kla kurallarÄ± bozamaz!</p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ› ï¸ Queue Wrapper SÄ±nÄ±fÄ±</h2>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code1"><code class="language-python">from collections import deque

class Queue:
    """
    Deque tabanlÄ± Queue wrapper.
    KullanÄ±cÄ±ya sadece Queue operasyonlarÄ± sunulur.
    """
    def __init__(self):
        # Alt Ã§izgi ile baÅŸlayan isim: "Bu deÄŸiÅŸkene dokunma!" demek
        self._items = deque()
        
    def enqueue(self, item):
        """SÄ±ranÄ±n SONUNA ekler - O(1)"""
        self._items.append(item)
        print(f"â†’ Enqueue: {item}")

    def dequeue(self):
        """SÄ±ranÄ±n BAÅINDAN Ã§Ä±karÄ±r - O(1)"""
        if self.is_empty():
            raise IndexError("Queue boÅŸ!")
        item = self._items.popleft()  # â† Kritik: popleft kullanÄ±lÄ±yor!
        print(f"â† Dequeue: {item}")
        return item

    def peek(self):
        """BaÅŸÄ±ndaki elemana BAK (Ã§Ä±karma)"""
        if self.is_empty():
            return None
        return self._items[0]

    def is_empty(self):
        return len(self._items) == 0
        
    def size(self):
        return len(self._items)

    def __repr__(self):
        return f"Queue({list(self._items)})"

# ===== KULLANIM =====
print("=" * 50)
print("ğŸ“‹ Queue Wrapper KullanÄ±mÄ±")
print("=" * 50)

q = Queue()
q.enqueue("Ali")
q.enqueue("Veli")
q.enqueue("AyÅŸe")

print(f"\nQueue durumu: {q}")
print(f"SÄ±radaki (peek): {q.peek()}")
print(f"Boyut: {q.size()}")

print(f"\nDequeue iÅŸlemleri:")
while not q.is_empty():
    q.dequeue()

print(f"\nQueue durumu: {q}")</code></pre>

            <textarea id="code1" class="code-editor">from collections import deque

class Queue:
    def __init__(self):
        self._items = deque()
    
    def enqueue(self, item):
        self._items.append(item)
        print(f"â†’ Enqueue: {item}")

    def dequeue(self):
        if self.is_empty():
            raise IndexError("Queue boÅŸ!")
        item = self._items.popleft()
        print(f"â† Dequeue: {item}")
        return item

    def peek(self):
        return self._items[0] if self._items else None

    def is_empty(self):
        return len(self._items) == 0
        
    def size(self):
        return len(self._items)

q = Queue()
q.enqueue("Ali")
q.enqueue("Veli")
q.enqueue("AyÅŸe")
print(f"Boyut: {q.size()}")
q.dequeue()
q.dequeue()</textarea>
            
            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“š Stack Wrapper SÄ±nÄ±fÄ±</h2>
        <p>AynÄ± deque'yi Stack iÃ§in de kullanabiliriz, ama farklÄ± metodlar sunarÄ±z:</p>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code-stack')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code-stack')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code-stack"><code class="language-python">from collections import deque

class Stack:
    """
    Deque tabanlÄ± Stack wrapper.
    LIFO: Son giren ilk Ã§Ä±kar.
    """
    def __init__(self):
        self._items = deque()

    def push(self, item):
        """YÄ±ÄŸÄ±nÄ±n tepesine ekler - O(1)"""
        self._items.append(item)
        print(f"â†“ Push: {item}")

    def pop(self):
        """YÄ±ÄŸÄ±nÄ±n tepesinden Ã§Ä±karÄ±r - O(1)"""
        if self.is_empty():
            raise IndexError("Stack boÅŸ!")
        item = self._items.pop()  # â† Stack iÃ§in: pop() (sondan Ã§Ä±kar)
        print(f"â†‘ Pop: {item}")
        return item

    def peek(self):
        """Tepedeki elemana BAK (Ã§Ä±karma)"""
        if self.is_empty():
            return None
        return self._items[-1]  # Son eleman = tepe

    def is_empty(self):
        return len(self._items) == 0

# ===== Stack vs Queue KarÅŸÄ±laÅŸtÄ±rmasÄ± =====
print("=" * 50)
print("ğŸ“š Stack (LIFO) vs ğŸ“‹ Queue (FIFO)")
print("=" * 50)

# AynÄ± elemanlarÄ± ekleyelim
print("\nğŸ“š STACK:")
s = Stack()
s.push(1)
s.push(2)
s.push(3)
print("Ã‡Ä±karma sÄ±rasÄ± (LIFO):")
while not s.is_empty():
    s.pop()

print("\nğŸ“‹ QUEUE:")
q = Queue()
q.enqueue(1)
q.enqueue(2)
q.enqueue(3)
print("Ã‡Ä±karma sÄ±rasÄ± (FIFO):")
while not q.is_empty():
    q.dequeue()</code></pre>

            <textarea id="code-stack" class="code-editor">from collections import deque

class Stack:
    def __init__(self):
        self._items = deque()

    def push(self, item):
        self._items.append(item)
        print(f"â†“ Push: {item}")

    def pop(self):
        if self.is_empty():
            raise IndexError("Stack boÅŸ!")
        item = self._items.pop()
        print(f"â†‘ Pop: {item}")
        return item

    def is_empty(self):
        return len(self._items) == 0

class Queue:
    def __init__(self):
        self._items = deque()

    def enqueue(self, item):
        self._items.append(item)
        print(f"â†’ Enqueue: {item}")

    def dequeue(self):
        if self.is_empty():
            raise IndexError("Queue boÅŸ!")
        item = self._items.popleft()
        print(f"â† Dequeue: {item}")
        return item

    def is_empty(self):
        return len(self._items) == 0

print("ğŸ“š STACK (1,2,3 eklendi):")
s = Stack()
s.push(1); s.push(2); s.push(3)
print("Ã‡Ä±karma:")
s.pop(); s.pop(); s.pop()

print("\nğŸ“‹ QUEUE (1,2,3 eklendi):")
q = Queue()
q.enqueue(1); q.enqueue(2); q.enqueue(3)
print("Ã‡Ä±karma:")
q.dequeue(); q.dequeue(); q.dequeue()</textarea>

            <div id="output-code-stack" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ§ª Performans YarÄ±ÅŸÄ±: List vs Deque</h2>
        <p>100,000 elemanÄ± baÅŸtan silme yarÄ±ÅŸÄ±. List neden kaybedecek?</p>
        
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="runPython('code2')">â–¶ YarÄ±ÅŸÄ± BaÅŸlat</button>
                    <button class="btn" onclick="toggleEdit('code2')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>
            
            <pre id="view-code2"><code class="language-python">import time
from collections import deque

N = 100_000
print(f"ğŸ {N} eleman baÅŸtan silinecek...\n")

# 1. LIST (KÃ¶tÃ¼)
liste = list(range(N))
start = time.time()
while liste:
    liste.pop(0)  # O(n) - her seferinde kaydÄ±rma!
list_time = time.time() - start
print(f"ğŸ“‹ List pop(0) : {list_time:.4f} saniye")

# 2. DEQUE (Ä°yi)
kuyruk = deque(range(N))
start = time.time()
while kuyruk:
    kuyruk.popleft()  # O(1) - sabit zaman!
deque_time = time.time() - start
print(f"ğŸ”„ Deque popleft: {deque_time:.4f} saniye")

kat = list_time / deque_time
print(f"\nğŸš€ SonuÃ§: Deque {kat:.0f}x daha hÄ±zlÄ±!")</code></pre>

            <textarea id="code2" class="code-editor">import time
from collections import deque

N = 100_000
print(f"ğŸ {N} eleman baÅŸtan silinecek...\n")

liste = list(range(N))
start = time.time()
while liste: liste.pop(0)
list_time = time.time() - start
print(f"ğŸ“‹ List: {list_time:.4f} sn")

kuyruk = deque(range(N))
start = time.time()
while kuyruk: kuyruk.popleft()
deque_time = time.time() - start
print(f"ğŸ”„ Deque: {deque_time:.4f} sn")

print(f"\nğŸš€ Deque {list_time / deque_time:.0f}x hÄ±zlÄ±!")</textarea>

            <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š Ã–zet: Ne Zaman Ne Kullan?</h2>
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
            <thead>
                <tr style="background: linear-gradient(135deg, #11998e, #38ef7d); color: white;">
                    <th style="padding: 15px;">Ä°htiyaÃ§</th>
                    <th style="padding: 15px;">KullanÄ±m</th>
                    <th style="padding: 15px;">Neden?</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">Queue (FIFO)</td>
                    <td style="padding: 12px;"><code>Queue</code> wrapper</td>
                    <td style="padding: 12px;">KullanÄ±cÄ± kÄ±sÄ±tlanÄ±r, sadece enqueue/dequeue</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">Stack (LIFO)</td>
                    <td style="padding: 12px;"><code>Stack</code> wrapper</td>
                    <td style="padding: 12px;">KullanÄ±cÄ± kÄ±sÄ±tlanÄ±r, sadece push/pop</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;">Ä°ki uÃ§lu iÅŸlem</td>
                    <td style="padding: 12px;"><code>deque</code> doÄŸrudan</td>
                    <td style="padding: 12px;">Hem baÅŸ hem son gerekli</td>
                </tr>
                <tr>
                    <td style="padding: 12px;">Random access</td>
                    <td style="padding: 12px;"><code>list</code></td>
                    <td style="padding: 12px;">Index ile eriÅŸim O(1)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="nav-footer">
        <a href="3b_queue_circular.html" class="btn">â¬…ï¸ Ã–nceki: Circular Queue</a>
        <a href="3d_queue_ornekler.html" class="btn btn-next">Sonraki: Ã–rnekler â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    function toggleEdit(id) {
        const view = document.getElementById('view-' + id);
        const editor = document.getElementById(id);
        if (editor.style.display === 'block') { editor.style.display = 'none'; view.style.display = 'block'; }
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
</script>
</body>
</html>