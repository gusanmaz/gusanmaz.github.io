<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>9.5: Python heapq ModÃ¼lÃ¼</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <style>
        .demo-box {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 25px 0;
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .function-card {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #2196f3;
            transition: transform 0.3s;
        }

        .function-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .function-name {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #1976d2;
            font-size: 16px;
        }

        .function-desc {
            color: #666;
            font-size: 14px;
            margin-top: 8px;
        }

        .complexity {
            background: #4caf50;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ 9.5: Python heapq ModÃ¼lÃ¼</h1>
            <p>YerleÅŸik Heap Ä°mplementasyonu</p>
        </header>

        <div class="section">
            <h2>ğŸ¯ Python heapq Nedir?</h2>
            <p>Python'un <strong>heapq</strong> modÃ¼lÃ¼, heap iÅŸlemleri iÃ§in optimize edilmiÅŸ fonksiyonlar saÄŸlar.</p>

            <div style="background: #fff3cd; padding: 20px; border-radius: 10px; border-left: 4px solid #ffc107; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #856404;">âš ï¸ Ã–nemli: Min Heap!</h4>
                <p style="margin: 10px 0;">Python heapq <strong>sadece min heap</strong> saÄŸlar. Max heap iÃ§in deÄŸerleri negatif yapÄ±n!</p>
            </div>

            <div class="function-grid">
                <div class="function-card">
                    <div class="function-name">heappush(heap, item)</div>
                    <div class="function-desc">Heap'e yeni eleman ekle</div>
                    <div class="complexity">O(log n)</div>
                </div>
                <div class="function-card">
                    <div class="function-name">heappop(heap)</div>
                    <div class="function-desc">En kÃ¼Ã§Ã¼k elemanÄ± Ã§Ä±kar</div>
                    <div class="complexity">O(log n)</div>
                </div>
                <div class="function-card">
                    <div class="function-name">heapify(list)</div>
                    <div class="function-desc">Listeyi heap'e Ã§evir</div>
                    <div class="complexity">O(n)</div>
                </div>
                <div class="function-card">
                    <div class="function-name">nsmallest(n, list)</div>
                    <div class="function-desc">En kÃ¼Ã§Ã¼k n elemanÄ± bul</div>
                    <div class="complexity">O(n log k)</div>
                </div>
                <div class="function-card">
                    <div class="function-name">nlargest(n, list)</div>
                    <div class="function-desc">En bÃ¼yÃ¼k n elemanÄ± bul</div>
                    <div class="complexity">O(n log k)</div>
                </div>
                <div class="function-card">
                    <div class="function-name">heappushpop(heap, item)</div>
                    <div class="function-desc">Push sonra pop (atomic)</div>
                    <div class="complexity">O(log n)</div>
                </div>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <span>heapq Temel Fonksiyonlar</span>
                    <button class="btn btn-run" onclick="runPython('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code1"><code class="language-python">import heapq

print("=== heapq Temel Fonksiyonlar ===\n")

# 1. heappush - Eleman ekle
heap = []
heapq.heappush(heap, 5)
heapq.heappush(heap, 3)
heapq.heappush(heap, 7)
heapq.heappush(heap, 1)

print(f"Heap sonrasÄ±: {heap}")
print(f"En kÃ¼Ã§Ã¼k (root): {heap[0]}")

# 2. heappop - En kÃ¼Ã§Ã¼ÄŸÃ¼ Ã§Ä±kar
min_val = heapq.heappop(heap)
print(f"\nPop edildi: {min_val}")
print(f"Kalan heap: {heap}")

# 3. heapify - Listeyi heap'e Ã§evir
arr = [9, 3, 7, 1, 5]
print(f"\nRastgele liste: {arr}")
heapq.heapify(arr)
print(f"Heapify sonrasÄ±: {arr}")

# 4. nsmallest / nlargest - En kÃ¼Ã§Ã¼k/bÃ¼yÃ¼k n eleman
data = [5, 2, 9, 1, 7, 3, 8]
print(f"\nVeri: {data}")
print(f"En kÃ¼Ã§Ã¼k 3: {heapq.nsmallest(3, data)}")
print(f"En bÃ¼yÃ¼k 3: {heapq.nlargest(3, data)}")

# 5. heappushpop - Push + pop (atomic)
heap = [1, 3, 5, 7]
heapq.heapify(heap)
result = heapq.heappushpop(heap, 2)
print(f"\nheappushpop(2): DÃ¶nen={result}, Heap={heap}")

# 6. heapreplace - Pop + push (atomic)
result = heapq.heapreplace(heap, 6)
print(f"heapreplace(6): DÃ¶nen={result}, Heap={heap}")</code></pre>
                <textarea id="code1" class="code-editor"></textarea>
                <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ” Max Heap NasÄ±l YapÄ±lÄ±r?</h2>
            
            <div class="code-container">
                <div class="code-header">
                    <span>Max Heap - Negatif Trick</span>
                    <button class="btn btn-run" onclick="runPython('code2')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code2"><code class="language-python">import heapq

print("=== Max Heap (Negatif YÃ¶ntemi) ===\n")

# Max heap simÃ¼le et
max_heap = []
values = [5, 2, 9, 1, 7, 3]

print(f"Eklenecek deÄŸerler: {values}")

# Negatif olarak ekle
for val in values:
    heapq.heappush(max_heap, -val)

print(f"Heap (negatif): {max_heap}")

# Ã‡Ä±karÄ±rken geri Ã§evir
print("\nMax'tan min'e sÄ±ralÄ± Ã§Ä±kar:")
while max_heap:
    val = -heapq.heappop(max_heap)
    print(f"  {val}", end=" ")

print("\n\n=== Alternatif: SÄ±nÄ±f Wrapper ===")

class MaxHeap:
    def __init__(self):
        self.heap = []
    
    def push(self, val):
        heapq.heappush(self.heap, -val)
    
    def pop(self):
        return -heapq.heappop(self.heap)
    
    def peek(self):
        return -self.heap[0] if self.heap else None
    
    def __len__(self):
        return len(self.heap)

# KullanÄ±m
mh = MaxHeap()
for val in [5, 2, 9, 1, 7]:
    mh.push(val)

print(f"Max Heap size: {len(mh)}")
print(f"En bÃ¼yÃ¼k: {mh.peek()}")
print(f"Pop: {mh.pop()}")
print(f"Yeni en bÃ¼yÃ¼k: {mh.peek()}")</code></pre>
                <textarea id="code2" class="code-editor"></textarea>
                <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ® Ä°nteraktif heapq Playground</h2>
            <p>heapq fonksiyonlarÄ±nÄ± canlÄ± olarak deneyin!</p>

            <div class="demo-box">
                <h3 style="text-align: center; margin-top: 0;">ğŸ§ª heapq Deneme AlanÄ±</h3>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                        <input type="number" id="heapqInput" placeholder="SayÄ± girin" style="padding: 10px; border: 2px solid #ddd; border-radius: 8px; flex: 1; min-width: 120px;">
                        <button onclick="heapqDemo.push()" style="padding: 10px 20px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">heappush</button>
                        <button onclick="heapqDemo.pop()" style="padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">heappop</button>
                        <button onclick="heapqDemo.clear()" style="padding: 10px 20px; background: #e0e0e0; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Temizle</button>
                    </div>
                </div>

                <div id="heapqDisplay" style="background: #e3f2fd; padding: 20px; border-radius: 10px; min-height: 80px; font-family: 'Courier New', monospace; font-size: 16px;">
                    heap = []
                </div>

                <div id="heapqLog" style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; max-height: 200px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 13px; color: #666;">
                    Ä°ÅŸlem geÃ§miÅŸi burada gÃ¶rÃ¼necek...
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ Ã–zet</h2>
            <div style="background: #e8f5e9; padding: 25px; border-radius: 10px;">
                <h4 style="margin-top: 0; color: #2e7d32;">âœ… heapq FonksiyonlarÄ±</h4>
                <ul>
                    <li><code>heappush(heap, item)</code> - Ekle O(log n)</li>
                    <li><code>heappop(heap)</code> - En kÃ¼Ã§Ã¼ÄŸÃ¼ Ã§Ä±kar O(log n)</li>
                    <li><code>heapify(list)</code> - Liste â†’ Heap O(n)</li>
                    <li><code>nsmallest/nlargest(n, list)</code> - Top-K</li>
                    <li><strong>Max heap:</strong> Negatif kullan!</li>
                    <li><strong>Ä°nteraktif playground</strong> ile fonksiyonlarÄ± canlÄ± deneyebilirsiniz</li>
                </ul>
            </div>
        </div>

        <div class="nav-footer">
            <a href="9d_priority_queue.html" class="btn">â¬…ï¸ Ã–nceki: Priority Queue</a>
            <a href="index.html" class="btn" style="background:#e67e22">ğŸ  Ana MenÃ¼</a>
            <a href="9f_heap_ornekler.html" class="btn btn-next">Sonraki: GerÃ§ek Ã–rnekler â¡ï¸</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
        let pyodideReady = false;
        let pyodide = null;
        async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
        main();
        async function runPython(id) {
            if (!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
            const code = document.getElementById('view-' + id).textContent;
            const out = document.getElementById('output-' + id);
            out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
            try {
                pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
                await pyodide.runPythonAsync(code);
                out.innerText = pyodide.runPython("sys.stdout.getvalue()");
            } catch (e) { out.innerText = "Hata: " + e; }
        }

        // Interactive heapq Demo
        class HeapqDemo {
            constructor() {
                this.heap = [];
                this.log = [];
                this.render();
            }

            push() {
                const input = document.getElementById('heapqInput');
                const val = parseInt(input.value);

                if (isNaN(val)) {
                    alert('LÃ¼tfen geÃ§erli bir sayÄ± girin!');
                    return;
                }

                // Simulate heappush
                this.heap.push(val);
                this.bubbleUp(this.heap.length - 1);

                this.addLog(`heappush(heap, ${val})`);
                input.value = '';
                this.render();
            }

            bubbleUp(i) {
                while (i > 0) {
                    const parent = Math.floor((i - 1) / 2);
                    if (this.heap[i] < this.heap[parent]) {
                        [this.heap[i], this.heap[parent]] = [this.heap[parent], this.heap[i]];
                        i = parent;
                    } else {
                        break;
                    }
                }
            }

            pop() {
                if (this.heap.length === 0) {
                    alert('Heap boÅŸ!');
                    return;
                }

                const min = this.heap[0];
                this.heap[0] = this.heap[this.heap.length - 1];
                this.heap.pop();

                if (this.heap.length > 0) {
                    this.bubbleDown(0);
                }

                this.addLog(`heappop(heap) â†’ ${min}`);
                this.render();
            }

            bubbleDown(i) {
                while (true) {
                    const left = 2 * i + 1;
                    const right = 2 * i + 2;
                    let smallest = i;

                    if (left < this.heap.length && this.heap[left] < this.heap[smallest]) {
                        smallest = left;
                    }

                    if (right < this.heap.length && this.heap[right] < this.heap[smallest]) {
                        smallest = right;
                    }

                    if (smallest !== i) {
                        [this.heap[i], this.heap[smallest]] = [this.heap[smallest], this.heap[i]];
                        i = smallest;
                    } else {
                        break;
                    }
                }
            }

            clear() {
                this.heap = [];
                this.log = [];
                this.addLog('heap.clear()');
                this.render();
            }

            addLog(msg) {
                this.log.push(msg);
                if (this.log.length > 10) {
                    this.log.shift();
                }
            }

            render() {
                const display = document.getElementById('heapqDisplay');
                const logDiv = document.getElementById('heapqLog');

                display.innerHTML = `heap = [${this.heap.join(', ')}]<br>`;
                if (this.heap.length > 0) {
                    display.innerHTML += `<span style="color: #4caf50;">heap[0] = ${this.heap[0]} (min)</span>`;
                }

                if (this.log.length === 0) {
                    logDiv.innerHTML = 'Ä°ÅŸlem geÃ§miÅŸi burada gÃ¶rÃ¼necek...';
                } else {
                    logDiv.innerHTML = this.log.map((msg, i) =>
                        `<div style="padding: 4px 0; ${i === this.log.length - 1 ? 'color: #2196f3; font-weight: bold;' : ''}">${msg}</div>`
                    ).join('');
                    logDiv.scrollTop = logDiv.scrollHeight;
                }
            }
        }

        let heapqDemo;
        window.addEventListener('load', () => {
            heapqDemo = new HeapqDemo();
        });
    </script>
</body>
</html>
