<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5.2: BST Temel Ä°ÅŸlemler</title>

    <!-- Unified CSS -->
    <link rel="stylesheet" href="../src/main.css">

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>

        .operation-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #3498db;
        }

        .operation-card h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .complexity-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
        }

        .o-logn { background: #d4edda; color: #155724; }
        .o-n { background: #f8d7da; color: #721c24; }

        .step-visual {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .mini-tree {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            font-family: monospace;
        }

        .tree-row {
            display: flex;
            gap: 10px;
            margin: 5px 0;
        }

        .tree-node-mini {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .tree-node-mini.highlight { background: #e74c3c; }
        .tree-node-mini.new { background: #27ae60; }
        .tree-node-mini.search { background: #f39c12; }

        .arrow-down {
            font-size: 24px;
            color: #7f8c8d;
        }

        .case-box {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
        }

        .case-box.case-easy { border-color: #27ae60; }
        .case-box.case-medium { border-color: #f39c12; }
        .case-box.case-hard { border-color: #e74c3c; }
        </style>
</head>

<body>
    <div class="container">
        <!-- Theme Toggle -->
        <button class="theme-toggle" aria-label="Toggle theme">ğŸŒ™</button>

<header>
        <h1>ğŸ”§ 5.2: BST Temel Ä°ÅŸlemler</h1>
        <p>Ekleme, Arama ve Silme</p>
    </header>

    <!-- EKLEME -->
    <div class="operation-card" style="border-left-color:#27ae60;">
        <h3>
            <span>1ï¸âƒ£ Ekleme (Insert)</span>
            <span class="complexity-badge o-logn">O(log n)</span>
        </h3>

        <p>Yeni deÄŸer, BST kuralÄ±na uygun yere yerleÅŸtirilir:</p>
        <ol>
            <li>KÃ¶kten baÅŸla</li>
            <li>DeÄŸer kÃ¼Ã§Ã¼kse sola, bÃ¼yÃ¼kse saÄŸa git</li>
            <li>BoÅŸ pozisyon bulana kadar devam et</li>
            <li>Yeni node'u o pozisyona yerleÅŸtir</li>
        </ol>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="CodeBlocks.run(\'code1\')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code1')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code1"><code class="language-python line-numbers">class Node:
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

class BST:
    def __init__(self):
        self.root = None

    def insert(self, data):
        """BST'ye yeni deÄŸer ekle - O(log n)"""
        if not self.root:
            self.root = Node(data)
            print(f"ğŸŒ± {data} kÃ¶k olarak eklendi")
            return

        current = self.root
        while True:
            if data < current.data:
                # Sola git
                if current.left is None:
                    current.left = Node(data)
                    print(f"â¬…ï¸ {data}, {current.data}'in soluna eklendi")
                    return
                current = current.left
            elif data > current.data:
                # SaÄŸa git
                if current.right is None:
                    current.right = Node(data)
                    print(f"â¡ï¸ {data}, {current.data}'in saÄŸÄ±na eklendi")
                    return
                current = current.right
            else:
                print(f"âš ï¸ {data} zaten var!")
                return

    def display(self, node=None, level=0, prefix="KÃ¶k"):
        """AÄŸacÄ± gÃ¶rselleÅŸtir"""
        if node is None:
            node = self.root
        if node is not None:
            print(" " * (level * 4) + prefix + ": " + str(node.data))
            if node.left or node.right:
                if node.left:
                    self.display(node.left, level + 1, "Sol")
                else:
                    print(" " * ((level + 1) * 4) + "Sol: -")
                if node.right:
                    self.display(node.right, level + 1, "SaÄŸ")
                else:
                    print(" " * ((level + 1) * 4) + "SaÄŸ: -")

# Test
print("=" * 50)
print("ğŸ“Œ BST EKLEME DEMO")
print("=" * 50)

bst = BST()
values = [50, 30, 70, 20, 40, 60, 80, 35]

for v in values:
    bst.insert(v)

print("\nğŸŒ³ AÄŸaÃ§ YapÄ±sÄ±:")
bst.display()</code></pre>

            

            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <!-- ARAMA -->
    <div class="operation-card" style="border-left-color:#f39c12;">
        <h3>
            <span>2ï¸âƒ£ Arama (Search)</span>
            <span class="complexity-badge o-logn">O(log n)</span>
        </h3>

        <p>Ä°kili arama mantÄ±ÄŸÄ±: Her adÄ±mda arama alanÄ± yarÄ±ya iner!</p>

        <div class="step-visual">
            <span style="font-weight:bold;">65 aranÄ±yor:</span>
            <div class="tree-node-mini search">50</div>
            <span>65>50 â†’</span>
            <div class="tree-node-mini search">70</div>
            <span>65<70 â†’</span>
            <div class="tree-node-mini search">60</div>
            <span>65>60 â†’</span>
            <div class="tree-node-mini highlight">65</div>
            <span>âœ… Bulundu!</span>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="CodeBlocks.run(\'code2\')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code2')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code2"><code class="language-python line-numbers">class Node:
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

class BST:
    def __init__(self):
        self.root = None

    def insert(self, data):
        if not self.root:
            self.root = Node(data)
            return
        current = self.root
        while True:
            if data < current.data:
                if not current.left:
                    current.left = Node(data)
                    return
                current = current.left
            else:
                if not current.right:
                    current.right = Node(data)
                    return
                current = current.right

    def search(self, target):
        """
        BST'de arama - O(log n)
        Ä°teratif (dÃ¶ngÃ¼ ile) versiyon
        """
        current = self.root
        steps = []

        while current:
            steps.append(current.data)
            if target == current.data:
                return True, steps
            elif target < current.data:
                current = current.left
            else:
                current = current.right

        return False, steps

    def search_recursive(self, target, node=None, steps=None):
        """
        BST'de arama - O(log n)
        Recursive (Ã¶zyinelemeli) versiyon
        """
        if node is None:
            node = self.root
        if steps is None:
            steps = []

        if node is None:
            return False, steps

        steps.append(node.data)

        if target == node.data:
            return True, steps
        elif target < node.data:
            return self.search_recursive(target, node.left, steps)
        else:
            return self.search_recursive(target, node.right, steps)

# Test
bst = BST()
for v in [50, 30, 70, 20, 40, 60, 80, 65, 75]:
    bst.insert(v)

print("ğŸŒ³ AÄŸaÃ§: 50 â†’ (30, 70) â†’ ...")
print("\n" + "=" * 50)
print("ğŸ” ARAMA TESTLERÄ°")
print("=" * 50)

for target in [65, 40, 100, 50]:
    found, path = bst.search(target)
    status = "âœ… Bulundu" if found else "âŒ Yok"
    print(f"\n{target} aranÄ±yor:")
    print(f"  Yol: {' â†’ '.join(map(str, path))}")
    print(f"  SonuÃ§: {status} ({len(path)} adÄ±m)")</code></pre>

            

            <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <!-- SÄ°LME -->
    <div class="operation-card" style="border-left-color:#e74c3c;">
        <h3>
            <span>3ï¸âƒ£ Silme (Delete)</span>
            <span class="complexity-badge o-logn">O(log n)</span>
        </h3>

        <p>Silme iÅŸlemi 3 farklÄ± duruma gÃ¶re deÄŸiÅŸir:</p>

        <div class="case-box case-easy">
            <h4 style="margin-top:0; color:#27ae60;">ğŸ“— Durum 1: Yaprak Node (Ã‡ocuÄŸu Yok)</h4>
            <p>En kolay durum: Node'u direkt sil</p>
            <div class="step-visual">
                <span>20'yi sil:</span>
                <code>20</code> â†’ <code>null</code>
            </div>
        </div>

        <div class="case-box case-medium">
            <h4 style="margin-top:0; color:#f39c12;">ğŸ“™ Durum 2: Tek Ã‡ocuklu Node</h4>
            <p>Node'u sil, Ã§ocuÄŸunu yerine koy</p>
            <div class="step-visual">
                <span>30'u sil (sadece sol Ã§ocuk var):</span>
                <code>30</code> â†’ <code>25 (Ã§ocuk yerine geÃ§er)</code>
            </div>
        </div>

        <div class="case-box case-hard">
            <h4 style="margin-top:0; color:#e74c3c;">ğŸ“• Durum 3: Ä°ki Ã‡ocuklu Node</h4>
            <p>En zor durum:</p>
            <ol>
                <li>SaÄŸ alt aÄŸacÄ±n <strong>en kÃ¼Ã§Ã¼k</strong> deÄŸerini bul (inorder successor)</li>
                <li>Bu deÄŸeri silinecek node'un yerine koy</li>
                <li>Successor'Ä± eski yerinden sil (Durum 1 veya 2)</li>
            </ol>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="CodeBlocks.run(\'code3\')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    <button class="btn" onclick="toggleEdit('code3')">âœï¸ DÃ¼zenle</button>
                </div>
            </div>

            <pre id="view-code3"><code class="language-python line-numbers">class Node:
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

class BST:
    def __init__(self):
        self.root = None

    def insert(self, data):
        if not self.root:
            self.root = Node(data)
            return
        c = self.root
        while True:
            if data < c.data:
                if not c.left: c.left = Node(data); return
                c = c.left
            else:
                if not c.right: c.right = Node(data); return
                c = c.right

    def find_min(self, node):
        """En kÃ¼Ã§Ã¼k deÄŸeri bul (en sol node)"""
        while node.left:
            node = node.left
        return node

    def delete(self, target, node=None, is_root_call=True):
        """BST'den deÄŸer sil - O(log n) - Recursive"""
        if is_root_call:
            node = self.root

        if node is None:
            print(f"âŒ {target} bulunamadÄ±!")
            return node

        # Hedefi bul
        if target < node.data:
            node.left = self.delete(target, node.left, False)
        elif target > node.data:
            node.right = self.delete(target, node.right, False)
        else:
            # BULUNDU! Åimdi sil

            # Durum 1 & 2: 0 veya 1 Ã§ocuk
            if node.left is None:
                print(f"ğŸ—‘ï¸ {target} silindi (saÄŸ Ã§ocuk/None ile deÄŸiÅŸtirildi)")
                return node.right
            elif node.right is None:
                print(f"ğŸ—‘ï¸ {target} silindi (sol Ã§ocuk ile deÄŸiÅŸtirildi)")
                return node.left

            # Durum 3: 2 Ã§ocuk
            # Inorder successor'Ä± bul (saÄŸ alt aÄŸacÄ±n minimumu)
            successor = self.find_min(node.right)
            print(f"ğŸ”„ {target} â†’ {successor.data} ile deÄŸiÅŸtiriliyor (inorder successor)")
            node.data = successor.data
            # Successor'Ä± sil
            node.right = self.delete(successor.data, node.right, False)

        if is_root_call:
            self.root = node
        return node

    def inorder(self, node=None, result=None):
        """SÄ±ralÄ± Ã§Ä±ktÄ± (inorder traversal)"""
        if result is None:
            result = []
        if node is None:
            node = self.root
        if node:
            self.inorder(node.left, result)
            result.append(node.data)
            self.inorder(node.right, result)
        return result

# Test
bst = BST()
for v in [50, 30, 70, 20, 40, 60, 80]:
    bst.insert(v)

print("ğŸŒ³ BaÅŸlangÄ±Ã§ (inorder):", bst.inorder())

print("\n--- Silme Ä°ÅŸlemleri ---\n")

# Durum 1: Yaprak
bst.delete(20)
print(f"   SonuÃ§: {bst.inorder()}\n")

# Durum 3: Ä°ki Ã§ocuklu
bst.delete(50)
print(f"   SonuÃ§: {bst.inorder()}\n")

# Olmayan deÄŸer
bst.delete(100)</code></pre>

            

            <div id="output-code3" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š Zaman KarmaÅŸÄ±klÄ±ÄŸÄ± Ã–zeti</h2>

        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
            <thead>
                <tr style="background: linear-gradient(135deg, #11998e, #38ef7d); color: white;">
                    <th style="padding: 15px;">Ä°ÅŸlem</th>
                    <th style="padding: 15px;">Ortalama</th>
                    <th style="padding: 15px;">En KÃ¶tÃ¼ (Dengesiz)</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>Arama</strong></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-logn">O(log n)</span></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-n">O(n)</span></td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>Ekleme</strong></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-logn">O(log n)</span></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-n">O(n)</span></td>
                </tr>
                <tr>
                    <td style="padding: 12px;"><strong>Silme</strong></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-logn">O(log n)</span></td>
                    <td style="padding: 12px;"><span class="complexity-badge o-n">O(n)</span></td>
                </tr>
            </tbody>
        </table>

        <p style="margin-top:15px; color:#666;">
            <strong>Not:</strong> En kÃ¶tÃ¼ durum, aÄŸacÄ±n tek tarafa uzamasÄ± durumunda (linked list gibi) oluÅŸur.
        </p>
    </div>

    <!-- Auto-generated navigation -->
        <div class="nav-footer">
        <a href="5a_bst_giris.html" class="btn">â¬…ï¸ Ã–nceki: BST GiriÅŸ</a>
        <a href="bst.html" class="btn" style="background:#11998e">ğŸ“‹ BST MenÃ¼</a>
        <a href="5c_bst_traversal.html" class="btn btn-next">Sonraki: Traversal â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    

    
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }
</script>
    </div>

    <!-- Prism.js scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <!-- Pyodide CDN -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>

    <!-- Unified JS -->
    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>

    <!-- Page-specific JS -->
    <script>

    

    
        const code = document.getElementById(id).value;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    
        else { editor.style.display = 'block'; view.style.display = 'none'; editor.focus(); }
    }

    </script>
</body>
</html>
