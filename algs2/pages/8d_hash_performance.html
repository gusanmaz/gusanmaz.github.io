<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8.4: Hash Table PerformansÄ± ve Load Factor</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="../src/main.css" rel="stylesheet" />
    <script type="module">
        import { CodeBlocks } from '../src/code-blocks.js';
        window.CodeBlocks = CodeBlocks;
        document.addEventListener('DOMContentLoaded', () => {
            CodeBlocks.init();
        });
    </script>
    <style>
        .meter-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .load-meter {
            width: 100%;
            height: 40px;
            background: linear-gradient(to right, #4caf50 0%, #ffc107 50%, #f44336 100%);
            border-radius: 20px;
            position: relative;
            margin: 20px 0;
        }

        .load-indicator {
            position: absolute;
            top: -10px;
            width: 4px;
            height: 60px;
            background: #2c3e50;
            transition: left 0.3s ease;
        }

        .load-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            left: -8px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #2c3e50;
        }

        .load-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }

        .performance-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin: 15px 0;
        }

        .perf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .perf-box {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .perf-box.good {
            background: #e8f5e9;
            border: 2px solid #4caf50;
        }

        .perf-box.warning {
            background: #fff3e0;
            border: 2px solid #ff9800;
        }

        .perf-box.bad {
            background: #ffebee;
            border: 2px solid #f44336;
        }

        .perf-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .perf-label {
            font-size: 0.9em;
            color: #666;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 200px;
            margin: 20px 0;
            padding: 10px;
            border-bottom: 2px solid #333;
        }

        .bar {
            flex: 1;
            margin: 0 5px;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 8px 8px 0 0;
            position: relative;
            transition: all 0.3s ease;
            max-width: 80px;
        }

        .bar:hover {
            opacity: 0.8;
            transform: translateY(-5px);
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            white-space: nowrap;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            font-weight: bold;
        }
    </style>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm0 10a3 3 0 100-6 3 3 0 000 6zm0 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM4 10a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm10 0a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1zM5.05 5.05a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zm9.9 9.9a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zm-9.9 0a1 1 0 011.414 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707zm9.9-9.9a1 1 0 011.414 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707z"/>
        </svg>
        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
        </svg>
    </button>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š 8.4: Hash Table PerformansÄ±</h1>
            <p>Load Factor ve HÄ±z Ä°liÅŸkisi</p>
        </header>

        <div class="section">
            <h2>ğŸ¯ Load Factor (Doluluk OranÄ±) Nedir?</h2>
            <p><strong>Load Factor</strong>, hash table'Ä±n ne kadar dolu olduÄŸunu gÃ¶steren bir sayÄ±dÄ±r.</p>

            <div style="background: var(--info-bg); padding: 20px; border-radius: 10px; border-left: 4px solid #2196f3; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #1565c0;">ğŸ“ FormÃ¼l</h4>
                <div style="font-family: 'Courier New', monospace; font-size: 20px; text-align: center; padding: 15px; background: white; border-radius: 8px; margin: 10px 0;">
                    Load Factor (Î±) = Eleman SayÄ±sÄ± / Tablo Boyutu
                </div>
                <div style="background: var(--warning-bg); padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <strong>Ã–rnekler:</strong>
                    <ul style="margin: 10px 0;">
                        <li>10 eleman, 10 boyut â†’ Î± = 10/10 = <strong>1.0</strong> (tam dolu)</li>
                        <li>5 eleman, 10 boyut â†’ Î± = 5/10 = <strong>0.5</strong> (yarÄ± dolu)</li>
                        <li>15 eleman, 10 boyut â†’ Î± = 15/10 = <strong>1.5</strong> (taÅŸtÄ±! - chaining)</li>
                    </ul>
                </div>
            </div>

            <div class="meter-container">
                <h3 style="text-align: center; margin-top: 0;">ğŸšï¸ Ä°nteraktif Load Factor GÃ¶stergesi</h3>
                <div style="display: flex; gap: 20px; justify-content: center; margin: 20px 0; flex-wrap: wrap;">
                    <div>
                        <label>Eleman SayÄ±sÄ±:</label>
                        <input type="number" id="numElements" value="5" min="0" max="20"
                               style="width: 80px; padding: 8px; border: 2px solid #667eea; border-radius: 6px; margin-left: 10px;">
                    </div>
                    <div>
                        <label>Tablo Boyutu:</label>
                        <input type="number" id="tableSize" value="10" min="1" max="20"
                               style="width: 80px; padding: 8px; border: 2px solid #667eea; border-radius: 6px; margin-left: 10px;">
                    </div>
                    <button onclick="updateLoadFactor()"
                            style="padding: 8px 20px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                        Hesapla
                    </button>
                </div>

                <div class="load-meter">
                    <div class="load-indicator" id="loadIndicator" style="left: 50%;"></div>
                </div>
                <div class="load-labels">
                    <span>0.0<br>BoÅŸ</span>
                    <span>0.5<br>Ä°deal</span>
                    <span>0.75<br>Kritik</span>
                    <span>1.0<br>Dolu</span>
                </div>

                <div id="loadResult" style="text-align: center; margin-top: 20px; font-size: 18px; font-weight: bold;">
                    Load Factor: 0.50
                </div>

                <div id="loadAdvice" style="margin-top: 15px; padding: 15px; border-radius: 8px; text-align: center;">
                    Ä°deal seviye! âœ…
                </div>
            </div>
        </div>

        <div class="section">
            <h2>âš¡ Load Factor ve Performans Ä°liÅŸkisi</h2>

            <div class="perf-grid">
                <div class="perf-box good">
                    <div style="font-size: 2em;">ğŸŸ¢</div>
                    <div class="perf-value" style="color: #4caf50;">Î± < 0.7</div>
                    <div class="perf-label">MÃ¼kemmel Performans</div>
                    <p style="font-size: 0.85em; margin: 10px 0 0 0;">Az Ã§akÄ±ÅŸma, hÄ±zlÄ± eriÅŸim</p>
                </div>

                <div class="perf-box warning">
                    <div style="font-size: 2em;">ğŸŸ¡</div>
                    <div class="perf-value" style="color: #ff9800;">0.7 â‰¤ Î± < 1.0</div>
                    <div class="perf-label">Dikkat! YavaÅŸlama BaÅŸlÄ±yor</div>
                    <p style="font-size: 0.85em; margin: 10px 0 0 0;">Ã‡akÄ±ÅŸmalar artÄ±yor</p>
                </div>

                <div class="perf-box bad">
                    <div style="font-size: 2em;">ğŸ”´</div>
                    <div class="perf-value" style="color: #f44336;">Î± â‰¥ 1.0</div>
                    <div class="perf-label">KÃ¶tÃ¼ Performans</div>
                    <p style="font-size: 0.85em; margin: 10px 0 0 0;">Ã‡ok Ã§akÄ±ÅŸma (chaining) / Eklenemez (open addressing)</p>
                </div>
            </div>

            <div style="background: #fff3cd; padding: 20px; border-radius: 10px; border-left: 4px solid #ffc107; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #856404;">ğŸ’¡ Python'un SÄ±rrÄ±</h4>
                <p style="margin: 10px 0;">Python dict'in load factor kritik seviyeye gelince (Î± â‰¥ 0.67) ne yapar?</p>
                <p style="margin: 10px 0; font-weight: bold; color: #e65100;">â†’ Tabloyu 2 katÄ±na Ã§Ä±karÄ±r ve tÃ¼m elemanlarÄ± yeniden yerleÅŸtirir (rehashing)!</p>
                <p style="margin: 10px 0 0 0;">Bu sayede performans her zaman O(1) kalÄ±r.</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ˆ Performans KarÅŸÄ±laÅŸtÄ±rmasÄ±</h2>

            <div class="chart-container">
                <h3 style="margin-top: 0;">Ortalama Arama SÃ¼resi vs Load Factor</h3>
                <div class="bar-chart">
                    <div class="bar" style="height: 20px;">
                        <div class="bar-value">1.0</div>
                        <div class="bar-label">Î±=0.25</div>
                    </div>
                    <div class="bar" style="height: 35px;">
                        <div class="bar-value">1.1</div>
                        <div class="bar-label">Î±=0.50</div>
                    </div>
                    <div class="bar" style="height: 60px;">
                        <div class="bar-value">1.5</div>
                        <div class="bar-label">Î±=0.75</div>
                    </div>
                    <div class="bar" style="height: 100px;">
                        <div class="bar-value">2.5</div>
                        <div class="bar-label">Î±=0.90</div>
                    </div>
                    <div class="bar" style="height: 180px;">
                        <div class="bar-value">10+</div>
                        <div class="bar-label">Î±=0.99</div>
                    </div>
                </div>
                <p style="color: #666; font-size: 0.9em;">Load factor arttÄ±kÃ§a arama sÃ¼resi katlanarak uzuyor!</p>
            </div>

            <div class="performance-card">
                <h3>ğŸ”¢ Matematiksel Beklenen DeÄŸerler</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <th style="padding: 12px;">Load Factor</th>
                            <th style="padding: 12px;">Chaining<br>(baÅŸarÄ±lÄ± arama)</th>
                            <th style="padding: 12px;">Chaining<br>(baÅŸarÄ±sÄ±z arama)</th>
                            <th style="padding: 12px;">Open Addressing<br>(baÅŸarÄ±lÄ± arama)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--success-bg);">
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;"><strong>Î± = 0.5</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1.25</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1.5</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1.5</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;"><strong>Î± = 0.75</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1.37</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">2.5</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">2.5</td>
                        </tr>
                        <tr style="background: var(--error-bg);">
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;"><strong>Î± = 0.9</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1.45</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">5.5</td>
                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">5.5</td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size: 0.85em; color: #666; margin: 0;">DeÄŸerler: Ortalama deneme sayÄ±sÄ± (probe count)</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”„ Rehashing (Yeniden Hash'leme)</h2>
            <p>Load factor kritik seviyeye gelince tablo boyutu artÄ±rÄ±lÄ±r ve tÃ¼m elemanlar yeniden yerleÅŸtirilir.</p>

            <div style="background: var(--success-bg); padding: 20px; border-radius: 10px; border-left: 4px solid #4caf50; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #2e7d32;">ğŸ”„ Rehashing SÃ¼reci</h4>
                <ol style="margin: 10px 0; padding-left: 25px;">
                    <li>Mevcut tablo boyutunu 2 katÄ±na Ã§Ä±kar (Ã¶rn: 10 â†’ 20)</li>
                    <li>Yeni boÅŸ tablo oluÅŸtur</li>
                    <li>Eski tablodaki <strong>her elemanÄ±</strong> yeni hash deÄŸeri ile yeni tabloya ekle</li>
                    <li>Eski tabloyu sil</li>
                </ol>
                <p style="margin: 10px 0 0 0; font-weight: bold;">âš ï¸ Maliyetli iÅŸlem: O(n) ama <strong>nadir</strong> olur!</p>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <span>Rehashing Ã–rneÄŸi - Python</span>
                    <button class="btn btn-run" onclick="CodeBlocks.run('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code1"><code class="language-python line-numbers">class HashTableWithRehash:
    """Otomatik rehashing yapan hash table"""

    def __init__(self, initial_size=4):
        self.size = initial_size
        self.table = [[] for _ in range(self.size)]
        self.count = 0
        self.max_load_factor = 0.75  # Kritik seviye
        self.rehash_count = 0

    def hash_function(self, key):
        return key % self.size

    def get_load_factor(self):
        return self.count / self.size

    def rehash(self):
        """Tabloyu bÃ¼yÃ¼t ve yeniden yerleÅŸtir"""
        self.rehash_count += 1
        old_table = self.table
        old_size = self.size

        # Yeni tablo (2 katÄ±)
        self.size = old_size * 2
        self.table = [[] for _ in range(self.size)]
        self.count = 0

        print(f"\nğŸ”„ REHASHING: {old_size} â†’ {self.size}")
        print("=" * 40)

        # TÃ¼m elemanlarÄ± yeniden ekle
        for bucket in old_table:
            for key, value in bucket:
                # Yeni hash deÄŸeri!
                self.insert(key, value, silent=True)

        print(f"âœ… Rehashing tamamlandÄ±!")
        print(f"   Yeni load factor: {self.get_load_factor():.2f}")

    def insert(self, key, value, silent=False):
        """Eleman ekle (gerekirse rehash yap)"""
        # Load factor kontrolÃ¼
        if self.get_load_factor() >= self.max_load_factor:
            if not silent:
                print(f"\nâš ï¸ Load factor kritik: {self.get_load_factor():.2f}")
            self.rehash()

        index = self.hash_function(key)

        # GÃ¼ncelleme mi?
        for i, (k, v) in enumerate(self.table[index]):
            if k == key:
                self.table[index][i] = (key, value)
                if not silent:
                    print(f"GÃ¼ncellendi: {key} â†’ indeks {index}")
                return

        # Yeni ekleme
        self.table[index].append((key, value))
        self.count += 1

        if not silent:
            print(f"Eklendi: {key} â†’ indeks {index} (LF: {self.get_load_factor():.2f})")

    def display_stats(self):
        print(f"\nğŸ“Š Ä°statistikler:")
        print(f"   Tablo boyutu: {self.size}")
        print(f"   Eleman sayÄ±sÄ±: {self.count}")
        print(f"   Load factor: {self.get_load_factor():.2f}")
        print(f"   Rehash sayÄ±sÄ±: {self.rehash_count}")
        print(f"   En uzun zincir: {max(len(b) for b in self.table)}")

# Test
ht = HashTableWithRehash(initial_size=4)

print("=== Hash Table ile Ekleme (Rehashing Ä°zle) ===")
print(f"BaÅŸlangÄ±Ã§ boyutu: 4, Max load factor: 0.75")
print()

# 10 eleman ekle - rehashing'leri gÃ¶zlemle
for i in range(1, 11):
    print(f"\n--- {i}. eleman ekleniyor ---")
    ht.insert(i * 3, f"deÄŸer_{i}")

ht.display_stats()

# Son durum
print("\n=== Son Tablo Durumu ===")
for i in range(min(ht.size, 16)):  # Ä°lk 16 indeks
    if ht.table[i]:
        keys = [k for k, v in ht.table[i]]
        print(f"[{i:2d}]: {keys}")
    else:
        print(f"[{i:2d}]: boÅŸ")</code></pre>
                <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’° Amortized Analysis (Ortalama Maliyet)</h2>

            <div style="background: var(--info-bg); padding: 20px; border-radius: 10px; border-left: 4px solid #2196f3; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #1565c0;">ğŸ¤” Soru</h4>
                <p style="margin: 10px 0;">Rehashing O(n) zaman alÄ±yor. Peki hash table insert iÅŸlemi O(1) mi, O(n) mi?</p>

                <h4 style="color: #2e7d32; margin-top: 15px;">âœ… Cevap: Amortized O(1)</h4>
                <p style="margin: 10px 0;">Ã‡oÄŸu insert O(1), sadece <strong>seyrek olarak</strong> rehashing oluyor:</p>
                <ul style="margin: 10px 0;">
                    <li>1000 insert â†’ Belki 10 rehashing</li>
                    <li>Her rehashing O(n) ama toplam yine O(n)</li>
                    <li>Ortalama: O(n) / n = <strong>O(1)</strong></li>
                </ul>
            </div>

            <div style="background: var(--warning-bg); padding: 20px; border-radius: 10px; border-left: 4px solid #ff9800; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #e65100;">ğŸ¯ Pratik Tavsiyeler</h4>
                <ul style="margin: 10px 0;">
                    <li>Load factor'Ä± <strong>0.7 altÄ±nda</strong> tut</li>
                    <li>Eleman sayÄ±sÄ± belliyse, tabloyu <strong>yeterince bÃ¼yÃ¼k</strong> baÅŸlat</li>
                    <li>Python dict gibi <strong>otomatik rehashing</strong> kullan</li>
                    <li>GerÃ§ek zamanlÄ± sistemlerde rehashing <strong>sÃ¼re kÄ±sÄ±tlamasÄ±</strong> yapabilir</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ Ã–zet</h2>
            <div style="background: var(--success-bg); padding: 25px; border-radius: 10px;">
                <h4 style="margin-top: 0; color: #2e7d32;">âœ… Bu BÃ¶lÃ¼mde Ã–ÄŸrendikleriniz</h4>
                <ul>
                    <li><strong>Load Factor (Î±):</strong> Eleman sayÄ±sÄ± / Tablo boyutu</li>
                    <li><strong>Ä°deal Î±:</strong> 0.5 - 0.7 arasÄ± (hÄ±zlÄ± eriÅŸim)</li>
                    <li><strong>Kritik Î±:</strong> 0.75+ (yavaÅŸlama baÅŸlar)</li>
                    <li><strong>Rehashing:</strong> Tablo 2x bÃ¼yÃ¼t, yeniden yerleÅŸtir (nadir ama O(n))</li>
                    <li><strong>Amortized O(1):</strong> Ortalamada insert hala Ã§ok hÄ±zlÄ±</li>
                </ul>

                <h4 style="color: #1565c0; margin-top: 20px;">ğŸ“š Sonraki Konu</h4>
                <p style="margin: 5px 0 0 0;">Python'da hash table nasÄ±l kullanÄ±lÄ±r? dict'in sÄ±rlarÄ±nÄ± keÅŸfedeceÄŸiz!</p>
            </div>
        </div>

        <div class="nav-footer" data-auto-nav></div>
    </div>
    
</body>
</html>

    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
