<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>9.6: Heap - GerÃ§ek DÃ¼nya Ã–rnekleri</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="../src/main.css" rel="stylesheet" />
    <script type="module">
        import { CodeBlocks } from '../src/code-blocks.js';
        window.CodeBlocks = CodeBlocks;
        document.addEventListener('DOMContentLoaded', () => {
            CodeBlocks.init();
        });
    </script>
    <style>
        .example-card {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #2196f3;
            transition: transform 0.3s;
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .example-title {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 15px;
        }

        .example-desc {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .use-case {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .use-case h4 {
            color: #667eea;
            margin-top: 0;
        }
    </style>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm0 10a3 3 0 100-6 3 3 0 000 6zm0 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM4 10a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm10 0a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1zM5.05 5.05a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zm9.9 9.9a1 1 0 011.414 0l.707.707a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 010-1.414zm-9.9 0a1 1 0 011.414 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707zm9.9-9.9a1 1 0 011.414 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707z"/>
        </svg>
        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
        </svg>
    </button>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸŒ 9.6: Heap GerÃ§ek Ã–rnekler</h1>
            <p>Pratik KullanÄ±m SenaryolarÄ±</p>
        </header>

        <div class="section">
            <h2>ğŸ¯ Heap KullanÄ±m AlanlarÄ±</h2>
            <p>Heap veri yapÄ±sÄ± birÃ§ok gerÃ§ek dÃ¼nya probleminde kullanÄ±lÄ±r:</p>

            <div class="use-case-grid">
                <div class="use-case">
                    <h4>âš¡ Ä°ÅŸletim Sistemleri</h4>
                    <p>CPU task scheduling, process Ã¶nceliklendirme</p>
                </div>
                <div class="use-case">
                    <h4>ğŸ—ºï¸ Graf AlgoritmalarÄ±</h4>
                    <p>Dijkstra, Prim, A* pathfinding</p>
                </div>
                <div class="use-case">
                    <h4>ğŸ“Š Veri Analizi</h4>
                    <p>Top-K elemanlar, medyan bulma, streaming data</p>
                </div>
                <div class="use-case">
                    <h4>ğŸ—œï¸ Veri SÄ±kÄ±ÅŸtÄ±rma</h4>
                    <p>Huffman encoding, optimal code generation</p>
                </div>
                <div class="use-case">
                    <h4>ğŸ® Oyun GeliÅŸtirme</h4>
                    <p>Event scheduling, AI decision making</p>
                </div>
                <div class="use-case">
                    <h4>ğŸ“ˆ Algoritmik Trading</h4>
                    <p>Order book management, price matching</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ Ã–rnek 1: Top-K Problem</h2>
            <p>En bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k K elemanÄ± bul - Ã‡ok yaygÄ±n mÃ¼lakat sorusu!</p>

            <div class="code-container">
                <div class="code-header">
                    <span>En BÃ¼yÃ¼k K Eleman</span>
                    <button class="btn btn-run" onclick="CodeBlocks.run('code1')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code1"><code class="language-python line-numbers">import heapq

def top_k_largest(nums, k):
    """En bÃ¼yÃ¼k k elemanÄ± bul - O(n log k)"""
    # Min heap kullan (boyut k)
    min_heap = []
    
    for num in nums:
        if len(min_heap) < k:
            heapq.heappush(min_heap, num)
        elif num > min_heap[0]:
            heapq.heapreplace(min_heap, num)
    
    return sorted(min_heap, reverse=True)

# Test
nums = [3, 2, 1, 5, 6, 4, 7, 8, 9]
k = 3

print(f"Liste: {nums}")
print(f"En bÃ¼yÃ¼k {k} eleman: {top_k_largest(nums, k)}")

# heapq ile daha kolay
print(f"\nheapq.nlargest: {heapq.nlargest(k, nums)}")

# Performans karÅŸÄ±laÅŸtÄ±rma
import time

big_list = list(range(100000, 0, -1))  # 100,000 eleman

# YÃ¶ntem 1: SÄ±ralama
start = time.time()
result1 = sorted(big_list, reverse=True)[:10]
time1 = time.time() - start

# YÃ¶ntem 2: Heap
start = time.time()
result2 = heapq.nlargest(10, big_list)
time2 = time.time() - start

print(f"\n=== 100K elemanda en bÃ¼yÃ¼k 10 ===")
print(f"SÄ±ralama: {time1*1000:.2f} ms")
print(f"Heap: {time2*1000:.2f} ms")
print(f"Heap {time1/time2:.1f}x daha hÄ±zlÄ±!")</code></pre>
                <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”€ Ã–rnek 2: K SÄ±ralÄ± Liste BirleÅŸtirme</h2>
            
            <div class="code-container">
                <div class="code-header">
                    <span>Merge K Sorted Lists</span>
                    <button class="btn btn-run" onclick="CodeBlocks.run('code2')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code2"><code class="language-python line-numbers">import heapq

def merge_k_sorted(lists):
    """K tane sÄ±ralÄ± listeyi birleÅŸtir"""
    heap = []
    result = []
    
    # Her listeden ilk elemanÄ± heap'e ekle
    for i, lst in enumerate(lists):
        if lst:
            heapq.heappush(heap, (lst[0], i, 0))
    
    # Heap'ten tek tek Ã§Ä±kar
    while heap:
        val, list_idx, elem_idx = heapq.heappop(heap)
        result.append(val)
        
        # Bu listeden bir sonraki elemanÄ± ekle
        if elem_idx + 1 < len(lists[list_idx]):
            next_val = lists[list_idx][elem_idx + 1]
            heapq.heappush(heap, (next_val, list_idx, elem_idx + 1))
    
    return result

# Test
lists = [
    [1, 4, 7],
    [2, 5, 8],
    [3, 6, 9]
]

print("Girdi:")
for i, lst in enumerate(lists):
    print(f"  Liste {i+1}: {lst}")

merged = merge_k_sorted(lists)
print(f"\nBirleÅŸtirilmiÅŸ: {merged}")
print(f"SÄ±ralÄ± mÄ±? {merged == sorted(merged)}")</code></pre>
                <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ® Ã–rnek 3: Task Scheduler (GÃ¶rev ZamanlayÄ±cÄ±)</h2>
            
            <div class="code-container">
                <div class="code-header">
                    <span>CPU Task Scheduler</span>
                    <button class="btn btn-run" onclick="CodeBlocks.run('code3')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code3"><code class="language-python line-numbers">import heapq

class Task:
    def __init__(self, name, priority, duration):
        self.name = name
        self.priority = priority  # DÃ¼ÅŸÃ¼k = yÃ¼ksek Ã¶ncelik
        self.duration = duration
    
    def __lt__(self, other):
        return self.priority < other.priority
    
    def __repr__(self):
        return f"{self.name}(P{self.priority}, {self.duration}s)"

def schedule_tasks(tasks):
    """GÃ¶revleri Ã¶ncelik sÄ±rasÄ±na gÃ¶re Ã§alÄ±ÅŸtÄ±r"""
    heap = []
    
    # TÃ¼m gÃ¶revleri heap'e ekle
    for task in tasks:
        heapq.heappush(heap, task)
    
    print("=== GÃ¶rev ZamanlayÄ±cÄ± ===\n")
    total_time = 0
    
    while heap:
        task = heapq.heappop(heap)
        print(f"â° Zaman {total_time}s: {task.name} baÅŸladÄ±")
        print(f"   Ã–ncelik: {task.priority}, SÃ¼re: {task.duration}s")
        total_time += task.duration
        print(f"   {task.name} tamamlandÄ± ({total_time}s)\n")
    
    print(f"âœ… TÃ¼m gÃ¶revler {total_time}s'de tamamlandÄ±")

# Test
tasks = [
    Task("Video oynat", 5, 3),
    Task("Sistem gÃ¼ncelle", 2, 10),
    Task("VirÃ¼s tara", 3, 8),
    Task("GÃ¼venlik duvarÄ±", 1, 2),  # En yÃ¼ksek Ã¶ncelik!
    Task("Email senkronize", 4, 5)
]

print("Gelen gÃ¶revler:")
for task in tasks:
    print(f"  {task}")

print()
schedule_tasks(tasks)</code></pre>
                <div id="output-code3" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Ã–rnek 4: Medyan Bulma (Streaming)</h2>
            
            <div class="code-container">
                <div class="code-header">
                    <span>Running Median with 2 Heaps</span>
                    <button class="btn btn-run" onclick="CodeBlocks.run('code4')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
                <pre id="view-code4"><code class="language-python line-numbers">import heapq

class MedianFinder:
    """2 heap ile medyan bul (akÄ±ÅŸ halinde)"""
    
    def __init__(self):
        self.small = []  # Max heap (negatif)
        self.large = []  # Min heap
    
    def add_num(self, num):
        """Yeni sayÄ± ekle"""
        # Ã–nce small'a ekle (max heap)
        heapq.heappush(self.small, -num)
        
        # small'Ä±n max'Ä± large'Ä±n min'inden kÃ¼Ã§Ã¼k olmalÄ±
        if self.small and self.large and (-self.small[0] > self.large[0]):
            val = -heapq.heappop(self.small)
            heapq.heappush(self.large, val)
        
        # BoyutlarÄ± dengele
        if len(self.small) > len(self.large) + 1:
            val = -heapq.heappop(self.small)
            heapq.heappush(self.large, val)
        
        if len(self.large) > len(self.small):
            val = heapq.heappop(self.large)
            heapq.heappush(self.small, -val)
    
    def find_median(self):
        """MedyanÄ± bul"""
        if len(self.small) > len(self.large):
            return -self.small[0]
        else:
            return (-self.small[0] + self.large[0]) / 2.0

# Test
mf = MedianFinder()
nums = [5, 15, 1, 3, 8, 7, 9, 10, 20]

print("=== AkÄ±ÅŸ Halinde Medyan ===\n")

for num in nums:
    mf.add_num(num)
    median = mf.find_median()
    print(f"Ekle {num:2d} â†’ Medyan: {median}")</code></pre>
                <div id="output-code4" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ Ã–zet</h2>
            <div style="background: var(--success-bg); padding: 25px; border-radius: 10px;">
                <h4 style="margin-top: 0; color: #2e7d32;">âœ… Heap ModÃ¼lÃ¼ TamamlandÄ±!</h4>
                <ul>
                    <li><strong>Top-K:</strong> En bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k k eleman - O(n log k)</li>
                    <li><strong>Merge K Lists:</strong> K sÄ±ralÄ± listeyi birleÅŸtir</li>
                    <li><strong>Task Scheduler:</strong> Ã–ncelik tabanlÄ± gÃ¶rev yÃ¶netimi</li>
                    <li><strong>Running Median:</strong> 2 heap ile anlÄ±k medyan</li>
                    <li><strong>GerÃ§ek kullanÄ±m:</strong> OS, Dijkstra, Huffman, Load balancing...</li>
                </ul>
                
                <h4 style="color: #1565c0; margin-top: 20px;">ğŸ“ Tebrikler!</h4>
                <p style="margin: 5px 0 0 0;">Heap veri yapÄ±sÄ±nÄ± baÅŸtan sona Ã¶ÄŸrendiniz. ArtÄ±k priority queue, heap sort ve diÄŸer heap uygulamalarÄ±nÄ± kullanabilirsiniz!</p>
            </div>
        </div>

        <div class="nav-footer" data-auto-nav></div>
    </div>
    
</body>
</html>

    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
