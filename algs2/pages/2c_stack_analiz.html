<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.3: Stack Analizi</title>

    <!-- Unified CSS -->
    <link rel="stylesheet" href="../src/main.css">

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <!-- CodeMirror 6 -->
    <script type="module">
        import {EditorView, basicSetup} from "https://cdn.jsdelivr.net/npm/codemirror@6/dist/index.js"
        import {python} from "https://cdn.jsdelivr.net/npm/@codemirror/lang-python@6/dist/index.js"
        import {oneDark} from "https://cdn.jsdelivr.net/npm/@codemirror/theme-one-dark@6/dist/index.js"

        // Make CodeMirror available globally
        window.CodeMirror = {
            EditorView,
            basicSetup,
            python: () => python(),
            oneDark
        };
    </script>

    <!-- Pyodide for Python execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
</head>
<body>
    <div class="container">
        <!-- Theme Toggle -->
        <button class="theme-toggle" aria-label="Toggle theme">ğŸŒ™</button>

        <header>
            <h1>ğŸ“Š 2.3: Stack Analizi ve Big O</h1>
            <p>MÃ¼hendislik BakÄ±ÅŸ AÃ§Ä±sÄ±yla Performans</p>
        </header>

        <div class="section section-info">
            <h2>ğŸ“ Big O Notasyonu HatÄ±rlatma</h2>
            <p><strong>Big O</strong>, bir algoritmanÄ±n en kÃ¶tÃ¼ durumda ne kadar sÃ¼receÄŸini gÃ¶sterir. Stack iÃ§in ÅŸunlarÄ± anlamamÄ±z gerekir:</p>
            <ul>
                <li><strong>O(1) - Sabit Zaman:</strong> Ä°ÅŸlem sÃ¼resi veri boyutundan baÄŸÄ±msÄ±z. 10 eleman da olsa, 10 milyon da olsa aynÄ± sÃ¼re.</li>
                <li><strong>O(n) - DoÄŸrusal Zaman:</strong> Veri iki katÄ±na Ã§Ä±karsa, sÃ¼re de iki katÄ±na Ã§Ä±kar.</li>
            </ul>
        </div>

        <div class="section">
            <h2>â±ï¸ Zaman KarmaÅŸÄ±klÄ±ÄŸÄ± (Time Complexity)</h2>
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background: var(--accent-blue); color: white;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Operasyon</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">KarmaÅŸÄ±klÄ±k</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">AÃ§Ä±klama</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Push</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-green);">O(1)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Dizinin sonuna ekleme. Her zaman tek adÄ±m, veri boyutu Ã¶nemli deÄŸil.</td>
                    </tr>
                    <tr style="background: var(--bg-tertiary);">
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Pop</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-green);">O(1)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Dizinin sonundan silme. Her zaman tek adÄ±m.</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Peek (Ãœste Bak)</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-green);">O(1)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">En Ã¼stteki elemana bakmak. Sadece indeks eriÅŸimi.</td>
                    </tr>
                    <tr style="background: var(--bg-tertiary);">
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>isEmpty</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-green);">O(1)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Stack boÅŸ mu? Top deÄŸiÅŸkenine bakmak yeterli.</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Arama (Search)</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-red);">O(n)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Stack'te arama yapmak iÃ§in tÃ¼m elemanlarÄ± kontrol etmek gerekir.</td>
                    </tr>
                </tbody>
            </table>

            <div style="background: linear-gradient(135deg, #d4edda 0%, #e8f5e9 100%); padding: 20px; border-radius: 12px; margin-top: 25px; border-left: 4px solid var(--accent-green);">
                <strong style="color: var(--accent-green-dark);">âœ… Neden O(1) Bu Kadar Ä°yi?</strong>
                <p style="margin: 10px 0 0 0; color: var(--text-primary);">Stack'te 10 eleman olsa da, 10 milyon eleman olsa da push/pop aynÄ± sÃ¼rede tamamlanÄ±r. Bu "sabit zaman" garantisi, stack'i Ã§ok gÃ¼venilir bir veri yapÄ±sÄ± yapar.</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’¾ Alan KarmaÅŸÄ±klÄ±ÄŸÄ± (Space Complexity)</h2>
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background: var(--accent-purple); color: white;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Durum</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">Alan</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">AÃ§Ä±klama</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Genel</td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-orange);">O(n)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">n eleman tutmak iÃ§in n birim bellek gerekir</td>
                    </tr>
                    <tr style="background: var(--bg-tertiary);">
                        <td style="padding: 10px; border: 1px solid #ddd;">Her iÅŸlem</td>
                        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: var(--accent-green);">O(1)</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Push/Pop iÃ§in ek bellek gerekmez</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ§ª Laboratuvar: Numpy vs Python List</h2>
            <p>1 Milyon elemanlÄ±k veri iÃ§in hÄ±z testi.</p>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-header-title">ğŸ Python - Performans Testi</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="CodeBlocks.run(0)">â–¶ï¸ Ã‡alÄ±ÅŸtÄ±r</button>
                        <button class="code-btn" onclick="CodeBlocks.copy(0)">ğŸ“‹ Kopyala</button>
                    </div>
                </div>

                <pre class="line-numbers"><code class="language-python">import time
import numpy as np

# --- NUMPY STACK SINIFI ---
class NumpyStack:
    def __init__(self, capacity):
        self.capacity = capacity
        self.data = np.zeros(capacity, dtype=int)
        self.top = 0

    def push(self, value):
        if self.top < self.capacity:
            self.data[self.top] = value
            self.top += 1

    def pop(self):
        if self.top > 0:
            self.top -= 1
            return self.data[self.top]

# --- TEST ---
N = 1_000_000
print(f"{N} eleman iÃ§in test...\n")

# 1. Python List
py_stack = []
start = time.time()
for i in range(N): py_stack.append(i)
while py_stack: py_stack.pop()
print(f"Python List: {time.time() - start:.4f} sn")

# 2. Numpy Stack
np_stack = NumpyStack(N)
start = time.time()
for i in range(N): np_stack.push(i)
while np_stack.top > 0: np_stack.pop()
print(f"Numpy Stack: {time.time() - start:.4f} sn")

print("\n--- NEDEN NUMPY DAHA YAVAÅ Ã‡IKTI? ---")
print("1. Python 'list' yapÄ±sÄ± C dili ile yazÄ±lmÄ±ÅŸtÄ±r ve Ã§ok optimize edilmiÅŸtir.")
print("2. Bizim yazdÄ±ÄŸÄ±mÄ±z 'NumpyStack' sÄ±nÄ±fÄ± ise her push iÅŸleminde Python fonksiyonu Ã§aÄŸÄ±rÄ±r.")
print("3. Python'da fonksiyon Ã§aÄŸÄ±rmak maliyetlidir (Function Call Overhead).")
print("4. EÄŸer C ile yazÄ±lmÄ±ÅŸ bir NumpyStack kullansaydÄ±k, listeden daha hÄ±zlÄ± olurdu.")
print("5. Numpy'Ä±n asÄ±l gÃ¼cÃ¼ tek tek eleman eklemede deÄŸil, vektÃ¶rel iÅŸlemlerde ortaya Ã§Ä±kar.")</code></pre>

                <div class="output" id="output-0"></div>
            </div>
        </div>

        <!-- Auto-generated navigation -->
        <div class="nav-footer"></div>
    </div>

    <!-- Prism.js scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <!-- Unified JS -->
    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>

    <!-- Page-specific initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Load numpy for Python code
            PyodideManager.init().then(() => {
                PyodideManager.loadPackage('numpy');
            });
        });
    </script>
</body>
</html>
