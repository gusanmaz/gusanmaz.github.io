<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0.3: Python Bellek ve Referanslar</title>

    <!-- Unified CSS -->
    <link rel="stylesheet" href="../src/main.css">

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <!-- CodeMirror 6 -->
    <script type="module">
        import {EditorView, basicSetup} from "https://cdn.jsdelivr.net/npm/codemirror@6/dist/index.js"
        import {python} from "https://cdn.jsdelivr.net/npm/@codemirror/lang-python@6/dist/index.js"
        import {oneDark} from "https://cdn.jsdelivr.net/npm/@codemirror/theme-one-dark@6/dist/index.js"

        window.CodeMirror = {
            EditorView,
            basicSetup,
            python: () => python(),
            oneDark
        };
    </script>

    <!-- Pyodide for Python execution -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>

    <style>
        .memory-box {
            display: inline-block;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 5px;
            text-align: center;
            background: white;
        }
        .memory-box .addr {
            font-size: 10px;
            color: #666;
            font-family: monospace;
        }
        .memory-box .value {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        .memory-box .varname {
            font-size: 12px;
            color: #3498db;
            font-style: italic;
        }
        .arrow-right {
            display: inline-block;
            color: #e74c3c;
            font-size: 24px;
            margin: 0 10px;
        }
        .info-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }
        .warning-card {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        .danger-card {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .memory-box {
            background: var(--surface-color);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .memory-box .value {
            color: var(--text-color);
        }
        [data-theme="dark"] .info-card {
            background: var(--surface-color);
            color: var(--text-color);
        }
        [data-theme="dark"] .warning-card {
            background: rgba(255, 193, 7, 0.1);
            color: var(--text-color);
        }
        [data-theme="dark"] .danger-card {
            background: rgba(220, 53, 69, 0.1);
            color: var(--text-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Theme Toggle -->
        <button class="theme-toggle" aria-label="Toggle theme">ğŸŒ™</button>

        <header>
            <h1>ğŸ§  0.3: Python Bellek ve Referanslar</h1>
            <p>Linked List ve BST iÃ§in Temel Kavramlar</p>
        </header>

        <div class="section">
            <h2>ğŸ¯ Neden Bu Konuyu Ã–ÄŸrenmeliyiz?</h2>
            <p>Linked List ve Binary Search Tree gibi veri yapÄ±larÄ±nÄ± anlamak iÃ§in <strong>referans (pointer)</strong> kavramÄ±nÄ± bilmek gerekir.</p>

            <div class="concept-box">
                <h3>ğŸ“Œ Temel Fikir</h3>
                <p>Python'da bir deÄŸiÅŸken <strong>deÄŸerin kendisini deÄŸil</strong>, o deÄŸerin bellekteki <strong>adresini (referansÄ±nÄ±)</strong> tutar.</p>
                <p>Bu, C'deki pointer kavramÄ±na benzer!</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ” id() Fonksiyonu: Bellek Adresini GÃ¶rme</h2>
            <p><code>id(obj)</code> fonksiyonu, bir objenin bellekteki benzersiz kimliÄŸini (adresini) dÃ¶ndÃ¼rÃ¼r.</p>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-header-title">ğŸ Python Kodu</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="CodeBlocks.run(1)">â–¶ï¸ Ã‡alÄ±ÅŸtÄ±r</button>
                        <button class="code-btn" onclick="CodeBlocks.copy(1)">ğŸ“‹ Kopyala</button>
                    </div>
                </div>

                <pre class="line-numbers"><code class="language-python"># Basit deÄŸerler
a = 42
b = 42
c = 43

print("=" * 50)
print("ğŸ”¢ TAM SAYILAR")
print("=" * 50)
print(f"a = {a}, id(a) = {id(a)}")
print(f"b = {b}, id(b) = {id(b)}")
print(f"c = {c}, id(c) = {id(c)}")

print(f"\na ve b aynÄ± obje mi? {a is b}")  # True! Python kÃ¼Ã§Ã¼k sayÄ±larÄ± cache'ler
print(f"a ve c aynÄ± obje mi? {a is c}")    # False

print("\n" + "=" * 50)
print("ğŸ“ STRING'LER")
print("=" * 50)
s1 = "merhaba"
s2 = "merhaba"
s3 = "dÃ¼nya"

print(f"s1 = '{s1}', id(s1) = {id(s1)}")
print(f"s2 = '{s2}', id(s2) = {id(s2)}")
print(f"s3 = '{s3}', id(s3) = {id(s3)}")

print(f"\ns1 ve s2 aynÄ± obje mi? {s1 is s2}")  # True! String interning

print("\n" + "=" * 50)
print("ğŸ“¦ LÄ°STELER")
print("=" * 50)
liste1 = [1, 2, 3]
liste2 = [1, 2, 3]
liste3 = liste1  # AynÄ± listeye referans!

print(f"liste1 = {liste1}, id(liste1) = {id(liste1)}")
print(f"liste2 = {liste2}, id(liste2) = {id(liste2)}")
print(f"liste3 = {liste3}, id(liste3) = {id(liste3)}")

print(f"\nliste1 ve liste2 aynÄ± obje mi? {liste1 is liste2}")  # False! FarklÄ± listeler
print(f"liste1 ve liste3 aynÄ± obje mi? {liste1 is liste3}")    # True! AynÄ± liste</code></pre>

                <div class="output" id="output-1"></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š GÃ¶rsel: DeÄŸiÅŸkenler ve Referanslar</h2>

            <div class="info-card">
                <h4 style="margin-top:0;">1ï¸âƒ£ Immutable (DeÄŸiÅŸtirilemez) Tipler</h4>
                <p>int, str, tuple gibi tipler deÄŸiÅŸtirilemez. AynÄ± deÄŸer = aynÄ± adres (genellikle).</p>

                <div style="text-align:center; margin:20px 0;">
                    <div class="memory-box">
                        <div class="varname">a</div>
                        <div class="arrow-right">â†’</div>
                    </div>
                    <div class="memory-box" style="background:#d4edda;">
                        <div class="addr">0x7f123456</div>
                        <div class="value">42</div>
                    </div>
                    <div class="memory-box">
                        <div class="varname">b</div>
                        <div class="arrow-right">â†’</div>
                    </div>
                </div>
                <p style="text-align:center; color:#666;">a ve b aynÄ± 42 objesini gÃ¶steriyor (aynÄ± adres)</p>
            </div>

            <div class="info-card warning-card">
                <h4 style="margin-top:0;">2ï¸âƒ£ Mutable (DeÄŸiÅŸtirilebilir) Tipler</h4>
                <p>list, dict, set gibi tipler deÄŸiÅŸtirilebilir. Her oluÅŸturma yeni adres!</p>

                <div style="text-align:center; margin:20px 0;">
                    <div class="memory-box">
                        <div class="varname">liste1</div>
                        <div class="arrow-right">â†’</div>
                    </div>
                    <div class="memory-box" style="background:#cce5ff;">
                        <div class="addr">0x7f111111</div>
                        <div class="value">[1,2,3]</div>
                    </div>

                    <br><br>

                    <div class="memory-box">
                        <div class="varname">liste2</div>
                        <div class="arrow-right">â†’</div>
                    </div>
                    <div class="memory-box" style="background:#fff3cd;">
                        <div class="addr">0x7f222222</div>
                        <div class="value">[1,2,3]</div>
                    </div>
                </div>
                <p style="text-align:center; color:#856404;">liste1 ve liste2 aynÄ± iÃ§eriÄŸe sahip ama FARKLI objeler!</p>
            </div>
        </div>

        <div class="section">
            <h2>âš ï¸ Tehlikeli Durum: Aliasing (Takma Ad)</h2>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-header-title">ğŸ Python Kodu</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="CodeBlocks.run(2)">â–¶ï¸ Ã‡alÄ±ÅŸtÄ±r</button>
                        <button class="code-btn" onclick="CodeBlocks.copy(2)">ğŸ“‹ Kopyala</button>
                    </div>
                </div>

                <pre class="line-numbers"><code class="language-python"># âš ï¸ ALÄ°ASÄ°NG: Ä°ki deÄŸiÅŸken aynÄ± objeyi gÃ¶sterirse...

print("=" * 50)
print("âš ï¸ ALIASING PROBLEMÄ°")
print("=" * 50)

# liste1 oluÅŸtur
liste1 = [1, 2, 3]
print(f"liste1 baÅŸlangÄ±Ã§: {liste1}")

# liste2'yi liste1'e eÅŸitle (KOPYA DEÄÄ°L, REFERANS!)
liste2 = liste1
print(f"liste2 = liste1 sonrasÄ±")
print(f"  liste1: {liste1}, id: {id(liste1)}")
print(f"  liste2: {liste2}, id: {id(liste2)}")

# liste2'yi deÄŸiÅŸtir
print("\nâš¡ liste2.append(4) yapÄ±yoruz...")
liste2.append(4)

print(f"\nâŒ SonuÃ§:")
print(f"  liste1: {liste1}")  # liste1 de deÄŸiÅŸti!
print(f"  liste2: {liste2}")
print(f"\n  Ä°kisi de aynÄ± obje: {liste1 is liste2}")

print("\n" + "=" * 50)
print("âœ… Ã‡Ã–ZÃœM: KOPYA OLUÅTUR")
print("=" * 50)

# Yeni baÅŸtan
liste1 = [1, 2, 3]
liste2 = liste1.copy()  # veya liste1[:] veya list(liste1)

print(f"liste1: {liste1}, id: {id(liste1)}")
print(f"liste2 (kopya): {liste2}, id: {id(liste2)}")

liste2.append(4)
print(f"\nliste2.append(4) sonrasÄ±:")
print(f"  liste1: {liste1}")  # DeÄŸiÅŸmedi!
print(f"  liste2: {liste2}")
print(f"\n  ArtÄ±k farklÄ± objeler: {liste1 is liste2}")</code></pre>

                <div class="output" id="output-2"></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”— Linked List ile BaÄŸlantÄ±: Node ReferanslarÄ±</h2>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-header-title">ğŸ Python Kodu</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="CodeBlocks.run(3)">â–¶ï¸ Ã‡alÄ±ÅŸtÄ±r</button>
                        <button class="code-btn" onclick="CodeBlocks.copy(3)">ğŸ“‹ Kopyala</button>
                    </div>
                </div>

                <pre class="line-numbers"><code class="language-python"># Linked List iÃ§in Node sÄ±nÄ±fÄ±
class Node:
    def __init__(self, data):
        self.data = data
        self.next = None  # BaÅŸlangÄ±Ã§ta hiÃ§bir yere iÅŸaret etmiyor

# Node'lar oluÅŸtur
node_a = Node("A")
node_b = Node("B")
node_c = Node("C")

print("=" * 60)
print("ğŸ”— NODE'LAR VE REFERANSLARI")
print("=" * 60)

print(f"\nnode_a: data={node_a.data}, id={id(node_a)}")
print(f"node_b: data={node_b.data}, id={id(node_b)}")
print(f"node_c: data={node_c.data}, id={id(node_c)}")

# BaÄŸlantÄ±larÄ± kur
print("\nâ›“ï¸ BaÄŸlantÄ±larÄ± kuruyoruz...")
node_a.next = node_b  # A -> B
node_b.next = node_c  # B -> C

print(f"\nnode_a.next = {node_a.next} (id: {id(node_a.next)})")
print(f"node_b       = {node_b}      (id: {id(node_b)})")
print(f"AynÄ± obje mi? {node_a.next is node_b}")

print("\n" + "=" * 60)
print("ğŸš¶ LÄ°STEYÄ° GEZELÄ°M")
print("=" * 60)

current = node_a  # BaÅŸtan baÅŸla
step = 1
while current is not None:
    next_info = f"â†’ {current.next.data}" if current.next else "â†’ None"
    print(f"AdÄ±m {step}: data={current.data}, id={id(current)} {next_info}")
    current = current.next  # Sonraki node'a geÃ§
    step += 1

print("\nğŸ’¡ GÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi, her node bir sonrakinin REFERANSINI tutuyor!")
print("   Bu 'pointer' mantÄ±ÄŸÄ±nÄ±n Python versiyonudur.")</code></pre>

                <div class="output" id="output-3"></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“š == vs is FarkÄ±</h2>

            <div class="info-card">
                <table style="width:100%; border-collapse:collapse;">
                    <tr style="background:#f8f9fa;">
                        <th style="padding:12px; border:1px solid #ddd;">OperatÃ¶r</th>
                        <th style="padding:12px; border:1px solid #ddd;">KarÅŸÄ±laÅŸtÄ±rma</th>
                        <th style="padding:12px; border:1px solid #ddd;">Ã–rnek</th>
                    </tr>
                    <tr>
                        <td style="padding:12px; border:1px solid #ddd;"><code>==</code></td>
                        <td style="padding:12px; border:1px solid #ddd;">DeÄŸer eÅŸitliÄŸi</td>
                        <td style="padding:12px; border:1px solid #ddd;"><code>[1,2] == [1,2]</code> â†’ True</td>
                    </tr>
                    <tr>
                        <td style="padding:12px; border:1px solid #ddd;"><code>is</code></td>
                        <td style="padding:12px; border:1px solid #ddd;">Kimlik eÅŸitliÄŸi (aynÄ± obje mi?)</td>
                        <td style="padding:12px; border:1px solid #ddd;"><code>[1,2] is [1,2]</code> â†’ False</td>
                    </tr>
                </table>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-header-title">ğŸ Python Kodu</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="CodeBlocks.run(4)">â–¶ï¸ Ã‡alÄ±ÅŸtÄ±r</button>
                        <button class="code-btn" onclick="CodeBlocks.copy(4)">ğŸ“‹ Kopyala</button>
                    </div>
                </div>

                <pre class="line-numbers"><code class="language-python"># == vs is

a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(f"a = {a}")
print(f"b = {b}")
print(f"c = a")

print(f"\na == b: {a == b}")  # True - deÄŸerler eÅŸit
print(f"a is b: {a is b}")    # False - farklÄ± objeler

print(f"\na == c: {a == c}")  # True - deÄŸerler eÅŸit
print(f"a is c: {a is c}")    # True - AYNI obje!

# None kontrolÃ¼ iÃ§in is kullanÄ±n
print(f"\nğŸ“Œ None kontrolÃ¼:")
x = None
print(f"x == None: {x == None}")  # Ã‡alÄ±ÅŸÄ±r ama...
print(f"x is None: {x is None}")  # Tercih edilen yÃ¶ntem!</code></pre>

                <div class="output" id="output-4"></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Ã–zet</h2>

            <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden;">
                <thead>
                    <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                        <th style="padding: 15px;">Kavram</th>
                        <th style="padding: 15px;">AÃ§Ä±klama</th>
                        <th style="padding: 15px;">Ã–rnek</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;"><strong>id()</strong></td>
                        <td style="padding: 12px;">Objenin bellek kimliÄŸi</td>
                        <td style="padding: 12px;"><code>id(x)</code></td>
                    </tr>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;"><strong>is</strong></td>
                        <td style="padding: 12px;">AynÄ± obje mi?</td>
                        <td style="padding: 12px;"><code>a is b</code></td>
                    </tr>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;"><strong>Referans</strong></td>
                        <td style="padding: 12px;">DeÄŸiÅŸken = objenin adresi</td>
                        <td style="padding: 12px;"><code>x = obj</code></td>
                    </tr>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;"><strong>Aliasing</strong></td>
                        <td style="padding: 12px;">Ä°ki isim, aynÄ± obje</td>
                        <td style="padding: 12px;"><code>b = a</code></td>
                    </tr>
                    <tr>
                        <td style="padding: 12px;"><strong>Kopya</strong></td>
                        <td style="padding: 12px;">Yeni obje oluÅŸtur</td>
                        <td style="padding: 12px;"><code>b = a.copy()</code></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <footer>
            <h3>ğŸ“š Bu Derste Ã–ÄŸrendiklerimiz</h3>
            <ul style="text-align: left; display: inline-block;">
                <li><code>id()</code> fonksiyonu ile bellek adreslerini gÃ¶rme</li>
                <li>DeÄŸiÅŸkenlerin referans olarak Ã§alÄ±ÅŸmasÄ±</li>
                <li>Immutable vs Mutable tipler</li>
                <li>Aliasing problemi ve Ã§Ã¶zÃ¼mÃ¼</li>
                <li><code>==</code> ve <code>is</code> operatÃ¶rleri arasÄ±ndaki fark</li>
                <li>Node referanslarÄ± ve Linked List ile baÄŸlantÄ±</li>
            </ul>
        </footer>

        <!-- Auto-generated navigation -->
        <div class="nav-footer"></div>
    </div>

    <!-- Prism.js scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <!-- Unified JS -->
    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>
</body>
</html>
