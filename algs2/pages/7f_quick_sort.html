<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.6: Quick Sort (HÄ±zlÄ± SÄ±ralama)</title>

    <!-- Unified CSS -->
    <link rel="stylesheet" href="../src/main.css">

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>

        .pivot-demo {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .partition-visual {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .p-cell {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #333;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .p-cell.pivot {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
            transform: scale(1.1);
        }
        .p-cell.less {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }
        .p-cell.greater {
            background: #e67e22;
            color: white;
            border-color: #d35400;
        }
        .p-cell.sorted {
            background: #27ae60;
            color: white;
        }
        .partition-step {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .complexity-warning {
            background: linear-gradient(135deg, #fff5f5, #fed7d7);
            border: 2px solid #fc8181;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        .step-box {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .step-num {
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        </style>
</head>

<body>


<div class="container">
        <!-- Theme Toggle -->
        <button class="theme-toggle" aria-label="Toggle theme">ğŸŒ™</button>

    <header>
        <h1>âš¡ 7.6: Quick Sort (HÄ±zlÄ± SÄ±ralama)</h1>
        <p>Pratikte En HÄ±zlÄ± Genel AmaÃ§lÄ± SÄ±ralama</p>
    </header>

    <div class="section">
        <h2>ğŸ“Œ Quick Sort Nedir?</h2>
        <p><strong>Quick Sort</strong>, bir "pivot" eleman seÃ§ip diziyi pivot etrafÄ±nda bÃ¶lÃ¼mlere ayÄ±ran, sonra bu bÃ¶lÃ¼mleri recursive olarak sÄ±ralayan algoritma. Pratikte en hÄ±zlÄ± sÄ±ralama algoritmasÄ±dÄ±r.</p>

        <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; border-left: 4px solid #4caf50; margin: 20px 0;">
            <h4 style="margin-top: 0; color: #2e7d32;">ğŸ¯ Temel Fikir: Partition (BÃ¶lÃ¼mleme)</h4>
            <ol style="margin-bottom: 0;">
                <li>Bir <strong>pivot</strong> eleman seÃ§</li>
                <li>Pivottan <strong>kÃ¼Ã§Ã¼k</strong> elemanlarÄ± sola topla</li>
                <li>Pivottan <strong>bÃ¼yÃ¼k</strong> elemanlarÄ± saÄŸa topla</li>
                <li>Pivot artÄ±k doÄŸru yerinde! ğŸ¯</li>
                <li>Sol ve saÄŸ parÃ§alarÄ± recursive sÄ±rala</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”„ Partition (BÃ¶lÃ¼mleme) AdÄ±mlarÄ±</h2>

        <div class="partition-step">
            <p><strong>Ã–rnek:</strong> [8, 3, 7, 4, 2, 6, 5] - Pivot: 5 (son eleman)</p>

            <div class="step-box">
                <div class="step-num">1</div>
                <div>
                    <strong>BaÅŸlangÄ±Ã§:</strong>
                    <div class="partition-visual">
                        <div class="p-cell">8</div>
                        <div class="p-cell">3</div>
                        <div class="p-cell">7</div>
                        <div class="p-cell">4</div>
                        <div class="p-cell">2</div>
                        <div class="p-cell">6</div>
                        <div class="p-cell pivot">5</div>
                    </div>
                </div>
            </div>

            <div class="step-box">
                <div class="step-num">2</div>
                <div>
                    <strong>KÃ¼Ã§Ã¼kleri sola, bÃ¼yÃ¼kleri saÄŸa:</strong>
                    <div class="partition-visual">
                        <div class="p-cell less">3</div>
                        <div class="p-cell less">4</div>
                        <div class="p-cell less">2</div>
                        <div class="p-cell pivot">5</div>
                        <div class="p-cell greater">8</div>
                        <div class="p-cell greater">7</div>
                        <div class="p-cell greater">6</div>
                    </div>
                    <p style="margin: 5px 0 0 0;">Pivot (5) artÄ±k doÄŸru yerinde! Solunda hepsi kÃ¼Ã§Ã¼k, saÄŸÄ±nda hepsi bÃ¼yÃ¼k.</p>
                </div>
            </div>

            <div class="step-box">
                <div class="step-num">3</div>
                <div>
                    <strong>Sol ve saÄŸ parÃ§alarÄ± recursive sÄ±rala:</strong>
                    <div class="partition-visual">
                        <div class="p-cell sorted">2</div>
                        <div class="p-cell sorted">3</div>
                        <div class="p-cell sorted">4</div>
                        <div class="p-cell sorted">5</div>
                        <div class="p-cell sorted">6</div>
                        <div class="p-cell sorted">7</div>
                        <div class="p-cell sorted">8</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“Š KarmaÅŸÄ±klÄ±k Analizi</h2>

        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <thead>
                <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                    <th style="padding: 15px;">Durum</th>
                    <th style="padding: 15px;">Zaman</th>
                    <th style="padding: 15px;">AÃ§Ä±klama</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>En Ä°yi</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd; color: #27ae60; font-weight: bold;">O(n log n)</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Pivot her zaman medyan</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Ortalama</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd; color: #27ae60; font-weight: bold;">O(n log n)</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Rastgele pivot iyi Ã§alÄ±ÅŸÄ±r</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>En KÃ¶tÃ¼</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd; color: #e74c3c; font-weight: bold;">O(nÂ²)</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Pivot her zaman en kÃ¼Ã§Ã¼k/bÃ¼yÃ¼k</td>
                </tr>
                <tr style="background: #d4edda;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Alan</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd; color: #27ae60; font-weight: bold;">O(log n)</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Call stack (in-place)</td>
                </tr>
            </tbody>
        </table>

        <div class="complexity-warning">
            <h4 style="margin-top: 0; color: #c53030;">âš ï¸ En KÃ¶tÃ¼ Durum: O(nÂ²)</h4>
            <p><strong>Ne zaman olur?</strong></p>
            <ul style="margin-bottom: 0;">
                <li>Dizi zaten sÄ±ralÄ±ysa ve son elemanÄ± pivot seÃ§ersek</li>
                <li>Dizi ters sÄ±ralÄ±ysa ve son elemanÄ± pivot seÃ§ersek</li>
                <li>TÃ¼m elemanlar aynÄ±ysa</li>
            </ul>
            <p><strong>Ã‡Ã¶zÃ¼m:</strong> Rastgele pivot seÃ§imi veya "median-of-three" kullanmak!</p>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ’» Python Implementasyonu</h2>

        <h3>1. Temel Versiyon (Lomuto Partition)</h3>
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="CodeBlocks.run(\'code1\')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
            </div>
            <pre id="view-code1"><code class="language-python line-numbers">def quick_sort(arr, low=0, high=None, depth=0):
    """
    Quick Sort - Lomuto Partition Scheme
    """
    if high is None:
        high = len(arr) - 1

    indent = "  " * depth

    if low < high:
        print(f"{indent}quick_sort(arr[{low}:{high+1}] = {arr[low:high+1]})")

        # Partition ve pivot indeksini al
        pivot_idx = partition(arr, low, high)
        print(f"{indent}  Pivot {arr[pivot_idx]} indeks {pivot_idx}'e yerleÅŸti")
        print(f"{indent}  Dizi: {arr}")

        # Sol ve saÄŸ parÃ§alarÄ± recursive sÄ±rala
        quick_sort(arr, low, pivot_idx - 1, depth + 1)
        quick_sort(arr, pivot_idx + 1, high, depth + 1)

    return arr

def partition(arr, low, high):
    """
    Lomuto Partition:
    Son elemanÄ± pivot seÃ§, kÃ¼Ã§Ã¼kleri sola topla
    """
    pivot = arr[high]  # Son eleman pivot
    i = low - 1        # KÃ¼Ã§Ã¼k elemanlarÄ±n sÄ±nÄ±rÄ±

    for j in range(low, high):
        if arr[j] <= pivot:
            i += 1
            arr[i], arr[j] = arr[j], arr[i]

    # Pivotu doÄŸru yerine koy
    arr[i + 1], arr[high] = arr[high], arr[i + 1]

    return i + 1  # Pivot'un yeni indeksi

# Test
dizi = [8, 3, 7, 4, 2, 6, 5]
print(f"BaÅŸlangÄ±Ã§: {dizi}\n")

sonuc = quick_sort(dizi.copy())
print(f"\n{'='*40}")
print(f"SonuÃ§: {sonuc}")</code></pre>
            <div id="output-code1" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>

        <h3>2. Pythonic Versiyon (Basit ama O(n) alan)</h3>
        <div class="code-container">
            <div class="code-header">
                <span>Python Kodu</span>
                <div>
                    <button class="btn btn-run" onclick="CodeBlocks.run(\'code2\')">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                </div>
            </div>
            <pre id="view-code2"><code class="language-python line-numbers">def quick_sort_simple(arr):
    """
    Basit Quick Sort (List Comprehension ile)

    NOT: Bu versiyon O(n) ek alan kullanÄ±r!
    AnlamasÄ± kolay ama bellek aÃ§Ä±sÄ±ndan verimsiz.
    """
    if len(arr) <= 1:
        return arr

    pivot = arr[len(arr) // 2]  # Ortadaki eleman pivot

    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]

    return quick_sort_simple(left) + middle + quick_sort_simple(right)

# Test
dizi = [8, 3, 7, 4, 2, 6, 5, 1, 9]
print(f"BaÅŸlangÄ±Ã§: {dizi}")

sonuc = quick_sort_simple(dizi)
print(f"SonuÃ§: {sonuc}")

# KarÅŸÄ±laÅŸtÄ±rma
print("\n--- Bu versiyonun artÄ±larÄ±/eksileri ---")
print("âœ… Ã‡ok okunabilir ve anlaÅŸÄ±lÄ±r")
print("âœ… Stabil (eÅŸit elemanlar middle'da)")
print("âŒ O(n) ek bellek kullanÄ±r")
print("âŒ GerÃ§ek Quick Sort in-place Ã§alÄ±ÅŸÄ±r")</code></pre>
            <div id="output-code2" class="output">Ã‡Ä±ktÄ± bekleniyor...</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ¯ Pivot SeÃ§im Stratejileri</h2>

        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px;">Strateji</th>
                    <th style="padding: 12px;">AÃ§Ä±klama</th>
                    <th style="padding: 12px;">Risk</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Ä°lk/Son Eleman</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">En basit yÃ¶ntem</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #e74c3c;">SÄ±ralÄ± dizide O(nÂ²)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Rastgele</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Rastgele eleman seÃ§</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #27ae60;">Ortalamada iyi</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Median-of-Three</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Ä°lk, orta, son'un medyanÄ±</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #27ae60;">En gÃ¼venli</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>ğŸ†š Quick Sort vs Merge Sort</h2>

        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px;">Ã–zellik</th>
                    <th style="padding: 12px;">Quick Sort</th>
                    <th style="padding: 12px;">Merge Sort</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">Ortalama</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">O(n log n)</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">O(n log n)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 10px; border: 1px solid #ddd;">En KÃ¶tÃ¼</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #e74c3c;">O(nÂ²)</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #27ae60;">O(n log n)</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">Alan</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #27ae60;">O(log n)</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #e74c3c;">O(n)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 10px; border: 1px solid #ddd;">Stabil</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">âŒ HayÄ±r</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">âœ… Evet</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">Cache</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #27ae60;">âœ… Friendly</td>
                    <td style="padding: 10px; border: 1px solid #ddd; color: #e74c3c;">âŒ Unfriendly</td>
                </tr>
                <tr style="background: #d4edda;">
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Pratikte</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Genellikle daha hÄ±zlÄ±!</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Garantili performans</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>ğŸŒ KullanÄ±m AlanlarÄ±</h2>
        <ul>
            <li>ğŸ”§ <strong>C qsort():</strong> Standart kÃ¼tÃ¼phane Quick Sort kullanÄ±r</li>
            <li>â˜• <strong>Java Arrays.sort():</strong> Primitive tipler iÃ§in Dual-Pivot Quick Sort</li>
            <li>ğŸ¯ <strong>Genel amaÃ§lÄ± sÄ±ralama:</strong> Ã‡oÄŸu durumda en hÄ±zlÄ±</li>
            <li>ğŸ’¾ <strong>Bellek kÄ±sÄ±tlÄ±:</strong> In-place Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÃ§in az bellek</li>
        </ul>
    </div>

    <div class="nav-footer">
        <a href="7e_merge_sort.html" class="btn">â¬…ï¸ Ã–nceki: Merge Sort</a>
        <a href="../index.html" class="btn" style="background:#e67e22">ğŸ  Ana MenÃ¼</a>
        <a href="8a_hash_intro.html" class="btn btn-next">Sonraki: Hash YapÄ±sÄ± â¡ï¸</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById('view-' + id).textContent;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }
</script>

    <!-- Prism.js scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <!-- Pyodide CDN -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>

    <!-- Unified JS -->
    <script src="../src/main.js"></script>
    <script src="../src/visualizations.js"></script>

    <!-- Page-specific JS -->
    <script>

    let pyodideReady = false;
    let pyodide = null;
    async function main() { pyodide = await loadPyodide(); pyodideReady = true; }
    main();

    async function runPython(id) {
        if(!pyodideReady) { alert("Python yÃ¼kleniyor..."); return; }
        const code = document.getElementById('view-' + id).textContent;
        const out = document.getElementById('output-' + id);
        out.innerText = "Ã‡alÄ±ÅŸÄ±yor...";
        try {
            pyodide.runPython(`import sys; from io import StringIO; sys.stdout = StringIO()`);
            await pyodide.runPythonAsync(code);
            out.innerText = pyodide.runPython("sys.stdout.getvalue()");
        } catch(e) { out.innerText = e; }
    }

    </script>
</body>
</html>
