
            <!-- Expandable Full Code -->
            <details class="full-code-expandable">
                <summary>ðŸ“‚ AdÄ±m 18 SonrasÄ± Tam Kod</summary>
                <div class="code-block">
                    <div class="code-header">
                        <div class="code-dots"><span class="red"></span><span class="yellow"></span><span class="green"></span></div>
                        sketch.js - Tam Kod (AdÄ±m 18)
                    </div>
<pre><span class="comment">// AdÄ±m 18: DÃ¼ÅŸme Animasyonu</span>
<span class="keyword">const</span> <span class="variable">ROWS</span> = <span class="number">6</span>;
<span class="keyword">const</span> <span class="variable">COLS</span> = <span class="number">7</span>;
<span class="keyword">const</span> <span class="variable">CELL_SIZE</span> = <span class="number">80</span>;
<span class="keyword">const</span> <span class="variable">PIECE_SIZE</span> = <span class="number">70</span>;
<span class="keyword">const</span> <span class="variable">OFFSET_Y</span> = <span class="number">40</span>;

<span class="keyword">let</span> <span class="variable">gameBoard</span> = [];
<span class="keyword">let</span> <span class="variable">currentPlayer</span> = <span class="number">1</span>;
<span class="keyword">let</span> <span class="variable">gameOver</span> = <span class="keyword">false</span>;
<span class="keyword">let</span> <span class="variable">winner</span> = <span class="number">0</span>;

<span class="comment">// â˜… Animasyon deÄŸiÅŸkenleri â˜…</span>
<span class="keyword">let</span> <span class="variable">isAnimating</span> = <span class="keyword">false</span>;
<span class="keyword">let</span> <span class="variable">animY</span> = <span class="number">0</span>;
<span class="keyword">let</span> <span class="variable">animTargetY</span> = <span class="number">0</span>;
<span class="keyword">let</span> <span class="variable">animCol</span> = <span class="number">0</span>;
<span class="keyword">let</span> <span class="variable">animRow</span> = <span class="number">0</span>;
<span class="keyword">let</span> <span class="variable">animPlayer</span> = <span class="number">0</span>;

<span class="keyword">const</span> <span class="variable">DIRECTIONS</span> = [
    [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>]], [[<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">0</span>]],
    [[<span class="number">1</span>, <span class="number">1</span>], [-<span class="number">1</span>, -<span class="number">1</span>]], [[<span class="number">1</span>, -<span class="number">1</span>], [-<span class="number">1</span>, <span class="number">1</span>]]
];

<span class="keyword">function</span> <span class="function">setup</span>() {
    <span class="function">createCanvas</span>(<span class="variable">COLS</span> * <span class="variable">CELL_SIZE</span>, <span class="variable">ROWS</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">OFFSET_Y</span>);
    <span class="function">initBoard</span>();
}

<span class="keyword">function</span> <span class="function">initBoard</span>() {
    <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">r</span> = <span class="number">0</span>; <span class="variable">r</span> &<span class="variable">lt</span>; <span class="variable">ROWS</span>; <span class="variable">r</span>++) {
        <span class="variable">gameBoard</span>[<span class="variable">r</span>] = [];
        <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">c</span> = <span class="number">0</span>; <span class="variable">c</span> &<span class="variable">lt</span>; <span class="variable">COLS</span>; <span class="variable">c</span>++) {
            <span class="variable">gameBoard</span>[<span class="variable">r</span>][<span class="variable">c</span>] = <span class="number">0</span>;
        }
    }
}

<span class="keyword">function</span> <span class="function">countInDirection</span>(<span class="variable">row</span>, <span class="variable">col</span>, <span class="variable">dRow</span>, <span class="variable">dCol</span>, <span class="variable">player</span>) {
    <span class="keyword">let</span> <span class="variable">count</span> = <span class="number">0</span>;
    <span class="keyword">let</span> <span class="variable">r</span> = <span class="variable">row</span> + <span class="variable">dRow</span>;
    <span class="keyword">let</span> <span class="variable">c</span> = <span class="variable">col</span> + <span class="variable">dCol</span>;
    <span class="keyword">while</span> (<span class="variable">r</span> &<span class="variable">gt</span>;= <span class="number">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">r</span> &<span class="variable">lt</span>; <span class="variable">ROWS</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">c</span> &<span class="variable">gt</span>;= <span class="number">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">c</span> &<span class="variable">lt</span>; <span class="variable">COLS</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">gameBoard</span>[<span class="variable">r</span>][<span class="variable">c</span>] == <span class="variable">player</span>) {
        <span class="variable">count</span>++;
        <span class="variable">r</span> += <span class="variable">dRow</span>;
        <span class="variable">c</span> += <span class="variable">dCol</span>;
    }
    <span class="keyword">return</span> <span class="variable">count</span>;
}

<span class="keyword">function</span> <span class="function">checkWin</span>(<span class="variable">row</span>, <span class="variable">col</span>, <span class="variable">player</span>) {
    <span class="keyword">for</span> (<span class="keyword">let</span> [<span class="variable">dir1</span>, <span class="variable">dir2</span>] <span class="keyword">of</span> <span class="variable">DIRECTIONS</span>) {
        <span class="keyword">let</span> <span class="variable">count</span> = <span class="number">1</span> + <span class="function">countInDirection</span>(<span class="variable">row</span>, <span class="variable">col</span>, <span class="variable">dir1</span>[<span class="number">0</span>], <span class="variable">dir1</span>[<span class="number">1</span>], <span class="variable">player</span>)
            + <span class="function">countInDirection</span>(<span class="variable">row</span>, <span class="variable">col</span>, <span class="variable">dir2</span>[<span class="number">0</span>], <span class="variable">dir2</span>[<span class="number">1</span>], <span class="variable">player</span>);
        <span class="keyword">if</span> (<span class="variable">count</span> &<span class="variable">gt</span>;= <span class="number">4</span>) <span class="keyword">return</span> <span class="keyword">true</span>;
    }
    <span class="keyword">return</span> <span class="keyword">false</span>;
}

<span class="keyword">function</span> <span class="function">checkDraw</span>() {
    <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">c</span> = <span class="number">0</span>; <span class="variable">c</span> &<span class="variable">lt</span>; <span class="variable">COLS</span>; <span class="variable">c</span>++) {
        <span class="keyword">if</span> (<span class="variable">gameBoard</span>[<span class="number">0</span>][<span class="variable">c</span>] == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;
    }
    <span class="keyword">return</span> <span class="keyword">true</span>;
}

<span class="keyword">function</span> <span class="function">draw</span>() {
    <span class="function">background</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="number">200</span>);

    <span class="comment">// Hover efekti</span>
    <span class="keyword">if</span> (!<span class="variable">gameOver</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; !<span class="variable">isAnimating</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">mouseY</span> &<span class="variable">gt</span>;= <span class="variable">OFFSET_Y</span>) {
        <span class="keyword">let</span> <span class="variable">hoverCol</span> = <span class="function">floor</span>(<span class="variable">mouseX</span> / <span class="variable">CELL_SIZE</span>);
        <span class="keyword">if</span> (<span class="variable">hoverCol</span> &<span class="variable">gt</span>;= <span class="number">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">hoverCol</span> &<span class="variable">lt</span>; <span class="variable">COLS</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">gameBoard</span>[<span class="number">0</span>][<span class="variable">hoverCol</span>] == <span class="number">0</span>) {
            <span class="keyword">let</span> <span class="variable">x</span> = <span class="variable">hoverCol</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">CELL_SIZE</span> / <span class="number">2</span>;
            <span class="keyword">if</span> (<span class="variable">currentPlayer</span> == <span class="number">1</span>) <span class="function">fill</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>);
            <span class="keyword">else</span> <span class="function">fill</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">150</span>);
            <span class="function">noStroke</span>();
            <span class="function">ellipse</span>(<span class="variable">x</span>, <span class="number">20</span>, <span class="variable">PIECE_SIZE</span> * <span class="number">0</span>.<span class="number">8</span>, <span class="variable">PIECE_SIZE</span> * <span class="number">0</span>.<span class="number">8</span>);
        }
    }

    <span class="function">drawBoard</span>();

    <span class="comment">// â˜… Animasyon Ã§izimi â˜…</span>
    <span class="keyword">if</span> (<span class="variable">isAnimating</span>) {
        <span class="keyword">let</span> <span class="variable">x</span> = <span class="variable">animCol</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">CELL_SIZE</span> / <span class="number">2</span>;
        <span class="keyword">if</span> (<span class="variable">animPlayer</span> == <span class="number">1</span>) <span class="function">fill</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);
        <span class="keyword">else</span> <span class="function">fill</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);
        <span class="function">noStroke</span>();
        <span class="function">ellipse</span>(<span class="variable">x</span>, <span class="variable">animY</span>, <span class="variable">PIECE_SIZE</span>, <span class="variable">PIECE_SIZE</span>);

        <span class="comment">// Animasyonu ilerlet</span>
        <span class="variable">animY</span> += <span class="number">15</span>;  <span class="comment">// DÃ¼ÅŸme hÄ±zÄ±</span>
        <span class="keyword">if</span> (<span class="variable">animY</span> &<span class="variable">gt</span>;= <span class="variable">animTargetY</span>) {
            <span class="variable">animY</span> = <span class="variable">animTargetY</span>;
            <span class="variable">isAnimating</span> = <span class="keyword">false</span>;
            <span class="function">finishDrop</span>();
        }
    }

    <span class="keyword">if</span> (<span class="variable">gameOver</span>) {
        <span class="function">drawGameOver</span>();
    } <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="variable">isAnimating</span>) {
        <span class="function">fill</span>(<span class="number">255</span>);
        <span class="function">textSize</span>(<span class="number">16</span>);
        <span class="function">textAlign</span>(<span class="variable">LEFT</span>);
        <span class="function">text</span>((<span class="variable">currentPlayer</span> == <span class="number">1</span>) ? <span class="string">"SÄ±ra: KÄ±rmÄ±zÄ±"</span> : <span class="string">"SÄ±ra: SarÄ±"</span>, <span class="number">10</span>, <span class="number">25</span>);
    }
}

<span class="keyword">function</span> <span class="function">drawBoard</span>() {
    <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">r</span> = <span class="number">0</span>; <span class="variable">r</span> &<span class="variable">lt</span>; <span class="variable">ROWS</span>; <span class="variable">r</span>++) {
        <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">c</span> = <span class="number">0</span>; <span class="variable">c</span> &<span class="variable">lt</span>; <span class="variable">COLS</span>; <span class="variable">c</span>++) {
            <span class="keyword">let</span> <span class="variable">x</span> = <span class="variable">c</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">CELL_SIZE</span> / <span class="number">2</span>;
            <span class="keyword">let</span> <span class="variable">y</span> = <span class="variable">r</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">CELL_SIZE</span> / <span class="number">2</span> + <span class="variable">OFFSET_Y</span>;

            <span class="keyword">if</span> (<span class="variable">gameBoard</span>[<span class="variable">r</span>][<span class="variable">c</span>] == <span class="number">0</span>) <span class="function">fill</span>(<span class="number">255</span>);
            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">gameBoard</span>[<span class="variable">r</span>][<span class="variable">c</span>] == <span class="number">1</span>) <span class="function">fill</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);
            <span class="keyword">else</span> <span class="function">fill</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);

            <span class="function">noStroke</span>();
            <span class="function">ellipse</span>(<span class="variable">x</span>, <span class="variable">y</span>, <span class="variable">PIECE_SIZE</span>, <span class="variable">PIECE_SIZE</span>);
        }
    }
}

<span class="keyword">function</span> <span class="function">drawGameOver</span>() {
    <span class="function">fill</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>);
    <span class="function">rect</span>(<span class="number">0</span>, <span class="variable">OFFSET_Y</span>, <span class="variable">width</span>, <span class="variable">height</span> - <span class="variable">OFFSET_Y</span>);
    <span class="function">fill</span>(<span class="number">255</span>);
    <span class="function">textSize</span>(<span class="number">40</span>);
    <span class="function">textAlign</span>(<span class="variable">CENTER</span>, <span class="variable">CENTER</span>);

    <span class="keyword">if</span> (<span class="variable">winner</span> == <span class="number">0</span>) <span class="function">text</span>(<span class="string">"BERABERE!"</span>, <span class="variable">width</span> / <span class="number">2</span>, <span class="variable">height</span> / <span class="number">2</span>);
    <span class="keyword">else</span> <span class="function">text</span>((<span class="variable">winner</span> == <span class="number">1</span>) ? <span class="string">"KIRMIZI KAZANDI!"</span> : <span class="string">"SARI KAZANDI!"</span>, <span class="variable">width</span> / <span class="number">2</span>, <span class="variable">height</span> / <span class="number">2</span>);

    <span class="function">textSize</span>(<span class="number">20</span>);
    <span class="function">text</span>(<span class="string">"Yeniden baÅŸlamak iÃ§in tÄ±klayÄ±n"</span>, <span class="variable">width</span> / <span class="number">2</span>, <span class="variable">height</span> / <span class="number">2</span> + <span class="number">50</span>);
}

<span class="keyword">function</span> <span class="function">mousePressed</span>() {
    <span class="keyword">if</span> (<span class="variable">gameOver</span>) {
        <span class="function">resetGame</span>();
        <span class="keyword">return</span>;
    }
    <span class="keyword">if</span> (<span class="variable">isAnimating</span>) <span class="keyword">return</span>;  <span class="comment">// Animasyon sÄ±rasÄ±nda tÄ±klamayÄ± engelle</span>
    <span class="keyword">if</span> (<span class="variable">mouseY</span> &<span class="variable">lt</span>; <span class="variable">OFFSET_Y</span>) <span class="keyword">return</span>;

    <span class="keyword">let</span> <span class="variable">sutun</span> = <span class="function">floor</span>(<span class="variable">mouseX</span> / <span class="variable">CELL_SIZE</span>);
    <span class="keyword">if</span> (<span class="variable">sutun</span> &<span class="variable">gt</span>;= <span class="number">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">sutun</span> &<span class="variable">lt</span>; <span class="variable">COLS</span>) {
        <span class="function">startDrop</span>(<span class="variable">sutun</span>);
    }
}

<span class="comment">// â˜… Animasyonu baÅŸlat â˜…</span>
<span class="keyword">function</span> <span class="function">startDrop</span>(<span class="variable">sutun</span>) {
    <span class="keyword">for</span> (<span class="keyword">let</span> <span class="variable">satir</span> = <span class="variable">ROWS</span> - <span class="number">1</span>; <span class="variable">satir</span> &<span class="variable">gt</span>;= <span class="number">0</span>; <span class="variable">satir</span>--) {
        <span class="keyword">if</span> (<span class="variable">gameBoard</span>[<span class="variable">satir</span>][<span class="variable">sutun</span>] == <span class="number">0</span>) {
            <span class="variable">isAnimating</span> = <span class="keyword">true</span>;
            <span class="variable">animCol</span> = <span class="variable">sutun</span>;
            <span class="variable">animRow</span> = <span class="variable">satir</span>;
            <span class="variable">animPlayer</span> = <span class="variable">currentPlayer</span>;
            <span class="variable">animY</span> = <span class="variable">OFFSET_Y</span>;
            <span class="variable">animTargetY</span> = <span class="variable">satir</span> * <span class="variable">CELL_SIZE</span> + <span class="variable">CELL_SIZE</span> / <span class="number">2</span> + <span class="variable">OFFSET_Y</span>;
            <span class="keyword">return</span>;
        }
    }
}

<span class="comment">// â˜… Animasyon bittiÄŸinde â˜…</span>
<span class="keyword">function</span> <span class="function">finishDrop</span>() {
    <span class="variable">gameBoard</span>[<span class="variable">animRow</span>][<span class="variable">animCol</span>] = <span class="variable">animPlayer</span>;

    <span class="keyword">if</span> (<span class="function">checkWin</span>(<span class="variable">animRow</span>, <span class="variable">animCol</span>, <span class="variable">animPlayer</span>)) {
        <span class="variable">gameOver</span> = <span class="keyword">true</span>;
        <span class="variable">winner</span> = <span class="variable">animPlayer</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="function">checkDraw</span>()) {
        <span class="variable">gameOver</span> = <span class="keyword">true</span>;
        <span class="variable">winner</span> = <span class="number">0</span>;
    } <span class="keyword">else</span> {
        <span class="variable">currentPlayer</span> = (<span class="variable">currentPlayer</span> == <span class="number">1</span>) ? <span class="number">2</span> : <span class="number">1</span>;
    }
}

<span class="keyword">function</span> <span class="function">resetGame</span>() {
    <span class="function">initBoard</span>();
    <span class="variable">currentPlayer</span> = <span class="number">1</span>;
    <span class="variable">gameOver</span> = <span class="keyword">false</span>;
    <span class="variable">winner</span> = <span class="number">0</span>;
    <span class="variable">isAnimating</span> = <span class="keyword">false</span>;
}
</pre>
                </div>
            </details>